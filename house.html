
<!DOCTYPE html>
<!-- saved from url=(0038)https://medium.com/p/1a5a9dfd76d0/edit -->
<html xmlns:cc="http://creativecommons.org/ns#" class=""><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./house1_files/ptrack-v1.1.0-engagedtime-slots.js"></script><script src="./house1_files/medium.com"></script><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=contain"><title>New story – Medium</title><link rel="canonical" href="https://medium.com/p/1a5a9dfd76d0/edit"><meta name="title" content="New story – Medium"><meta name="referrer" content="always"><meta name="description" content="In its most basic form, a story on Medium consists of a title and a body text."><meta name="theme-color" content="#000000"><meta property="og:title" content="New story – Medium"><meta property="og:url" content="https://medium.com/p/1a5a9dfd76d0/edit"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/1*GfYo2WZaEjsfGjKKCmkXdw.png"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="In its most basic form, a story on Medium consists of a title and a body text."><meta name="twitter:description" content="In its most basic form, a story on Medium consists of a title and a body text."><meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/1200/1*GfYo2WZaEjsfGjKKCmkXdw.png"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@antin"><meta property="author" content="Antin Harasymiv"><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><meta name="twitter:creator" content="@antin"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="27 min read"><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/45b714dfbed1"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/45b714dfbed1"><meta property="al:android:url" content="medium://p/45b714dfbed1"><meta property="al:web:url" content="https://medium.com/p/1a5a9dfd76d0/edit"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="https://medium.com/osd.xml"><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/45b714dfbed1"><link rel="stylesheet" type="text/css" class="js-glyph-" id="glyph-8" href="./house1_files/m2.css"><link rel="stylesheet" href="./house1_files/main-branding-base.xUif4ASU5ExSz48f5pCvPA.css"><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga("create", "UA-24232453-2", "auto", {"allowLinker": true, "legacyCookieDomain": window.location.hostname}); ga("send", "pageview");</script><script async="" src="./house1_files/analytics.js"></script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium-editor.3Y6xpZ-0FSdWDnPM3hSBIA.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/304/304/1*RGUDs-7Iegr7UOmlu4lmpg.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/240/240/1*RGUDs-7Iegr7UOmlu4lmpg.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/152/152/1*RGUDs-7Iegr7UOmlu4lmpg.png"><link rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/120/120/1*RGUDs-7Iegr7UOmlu4lmpg.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717"></head><body itemscope="" class="browser-chrome os-mac is-withMagicUnderlinesv-glyph v-glyph--m2 is-js is-withMagicUnderlines postShowScreen is-postEditMode" data-action-scope="_actionscope_0"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main surface-container" id="container"><div class="butterBar butterBar--error" data-action-scope="_actionscope_1"></div><div id="_obv.shell._surface_1531924022324" class="surface" style="visibility: visible; display: block;"><div class="screenContent surface-content" data-action-scope="_actionscope_33"><canvas class="canvas-renderer" width="1195" height="621"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"><div class="notesMarkers" data-action-scope="_actionscope_37"></div></div><div class="metabar u-clearfix js-metabar u-fixed u-backgroundTransparentWhiteDarkest u-xs-sizeFullViewportWidth" data-action-scope="_actionscope_38"><div class="js-metabarMiddle metabar-inner u-marginAuto u-maxWidth1000 u-flexCenter u-justifyContentSpaceBetween u-height65 u-xs-height56 u-paddingLeft20 u-paddingRight20"><div class="metabar-block u-flex1  u-flexCenter"><div class="js-metabarLogoLeft"><a href="https://medium.com/" data-log-event="home" class="siteNav-logo u-flexCenter u-paddingTop0"><span class="svgIcon svgIcon--logoMonogram svgIcon--45px is-flushLeft u-textColorDarker"><svg class="svgIcon-use" width="45" height="45" viewBox="0 0 45 45"><path d="M5 40V5h35v35H5zm8.56-12.627c0 .555-.027.687-.318 1.03l-2.457 2.985v.396h6.974v-.396l-2.456-2.985c-.291-.343-.344-.502-.344-1.03V18.42l6.127 13.364h.714l5.256-13.364v10.644c0 .29 0 .342-.185.528l-1.848 1.796v.396h9.19v-.396l-1.822-1.796c-.184-.186-.21-.238-.21-.528V15.937c0-.291.026-.344.21-.528l1.823-1.797v-.396h-6.471l-4.622 11.542-5.203-11.542h-6.79v.396l2.14 2.64c.239.292.291.37.291.768v10.353z"></path></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="u-flexCenter u-height65 u-xs-height56 u-marginLeft10"><span class="js-metabarMessage u-textColorDarker">Draft<span class="u-textColorNormal u-marginLeft18">Saved</span></span></div></div><div class="metabar-block u-flex0 u-flexCenter"><div class="u-flexCenter u-height65 u-xs-height56 u-paddingLeft8 u-paddingRight8 u-xs-paddingTop2"><button class="button button--chromeless u-baseColor--buttonNormal js-buttonRequiresPostId" data-action="share-draft">Share</button></div><div class="u-flexCenter u-height65 u-xs-height56 u-paddingLeft8 u-paddingRight8"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon button--withIconRight button--withIconAndLabel button--publish js-publishButton js-buttonRequiresPostId is-touched" data-action="pre-publish" data-action-source="post_edit_prepublish"><span class="button-label  js-buttonLabel">Publish</span><span class="svgIcon svgIcon--arrowDown svgIcon--19px"><svg class="svgIcon-use" width="19" height="19" viewBox="0 0 19 19"><path d="M3.9 6.772l5.205 5.756.427.472.427-.472 5.155-5.698-.854-.772-4.728 5.254L4.753 6z" fill-rule="evenodd"></path></svg></span></button></div><div class="u-flexCenter u-height65 u-xs-height56 u-paddingLeft8 u-paddingRight8"><button class="button button--circle button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon js-moreActionsButton is-touched" data-action="show-post-actions-popover"><span class="svgIcon svgIcon--moreFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M5 12.5c0 .552.195 1.023.586 1.414.39.39.862.586 1.414.586.552 0 1.023-.195 1.414-.586.39-.39.586-.862.586-1.414 0-.552-.195-1.023-.586-1.414A1.927 1.927 0 0 0 7 10.5c-.552 0-1.023.195-1.414.586-.39.39-.586.862-.586 1.414zm5.617 0c0 .552.196 1.023.586 1.414.391.39.863.586 1.414.586.552 0 1.023-.195 1.414-.586.39-.39.586-.862.586-1.414 0-.552-.195-1.023-.586-1.414a1.927 1.927 0 0 0-1.414-.586c-.551 0-1.023.195-1.414.586-.39.39-.586.862-.586 1.414zm5.6 0c0 .552.195 1.023.586 1.414.39.39.868.586 1.432.586.551 0 1.023-.195 1.413-.586.391-.39.587-.862.587-1.414 0-.552-.196-1.023-.587-1.414a1.927 1.927 0 0 0-1.413-.586c-.565 0-1.042.195-1.432.586-.39.39-.586.862-.587 1.414z" fill-rule="evenodd"></path></svg></span></button></div><div class="buttonSet buttonSet--wide"><button class="button button--primary button--filled button--small button--circle button--chromeless is-inSiteNavBar u-accentColor--buttonNormal button--withIcon button--withSvgIcon button--activity js-notificationsButton u-marginRight16 u-xs-marginRight5 u-lineHeight0 is-active is-counter" title="Notifications" aria-label="Notifications" data-action="open-notifications"><span class="button-defaultState"><span class="svgIcon svgIcon--bell svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="-293 409 25 25"><path d="M-273.327 423.67l-1.673-1.52v-3.646a5.5 5.5 0 0 0-6.04-5.474c-2.86.273-4.96 2.838-4.96 5.71v3.41l-1.68 1.553c-.204.19-.32.456-.32.734V427a1 1 0 0 0 1 1h3.49a3.079 3.079 0 0 0 3.01 2.45 3.08 3.08 0 0 0 3.01-2.45h3.49a1 1 0 0 0 1-1v-2.59c0-.28-.12-.55-.327-.74zm-7.173 5.63c-.842 0-1.55-.546-1.812-1.3h3.624a1.92 1.92 0 0 1-1.812 1.3zm6.35-2.45h-12.7v-2.347l1.63-1.51c.236-.216.37-.522.37-.843v-3.41c0-2.35 1.72-4.356 3.92-4.565a4.353 4.353 0 0 1 4.78 4.33v3.645c0 .324.137.633.376.85l1.624 1.477v2.373z"></path></svg></span></span><span class="button-activeState"><span class="button-text">5</span><span class="u-textScreenReader">New notifications: 5</span></span></button><button class="button button--chromeless u-baseColor--buttonNormal u-marginLeft4 is-inSiteNavBar js-userActions" aria-haspopup="true" data-action="open-userActions"><div class="avatar"><img src="./house1_files/0_RdMeXz7X25PLJkVe.jpeg" class="avatar-image avatar-image--icon" alt="Peter Van Dijck"></div></button></div></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-height65 u-xs-height56"></div><main role="main"><article class=" u-minHeight100vhOffset65 u-overflowHidden postArticle postArticle--full" data-scroll="native"><div class="container u-maxWidth740 js-audienceStatusContainer"><div class="u-paddingTop15 u-paddingBottom10 u-fontSize14 u-lineHeight35 u-textColorNormal u-borderBottom1 u-borderColorLighter u-relative js-audience" data-action-scope="_actionscope_36"><div class="u-flex"><div class="u-flex0 u-flexAlignSelfCenter"><a class="link u-baseColor--link" href="https://medium.com/creators" target="_blank">Learn more about joining the Partner Program</a></div></div></div></div><header class="container u-maxWidth740"><div class="uiScale uiScale-ui--regular uiScale-caption--regular postMetaHeader u-paddingBottom10 row"><div class="col u-size12of12 js-postMetaLockup"><div class="uiScale uiScale-ui--regular uiScale-caption--regular postMetaLockup postMetaLockup--authorWithBio u-flexCenter js-postMetaLockup"><div class="u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@petervandijck?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="b4fca1ba9239" data-action-type="hover" data-user-id="b4fca1ba9239" dir="auto"><img src="./house1_files/0_RdMeXz7X25PLJkVe(1).jpeg" class="avatar-image avatar-image--small" alt="Go to the profile of Peter Van Dijck"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><div class="u-lineHeightTightest"><a class="ds-link ds-link--styleSubtle ui-captionStrong u-inlineBlock link link--darken link--darker" href="https://medium.com/@petervandijck?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="b4fca1ba9239" data-action-type="hover" data-user-id="b4fca1ba9239" dir="auto">Peter Van Dijck</a></div><div class="ui-caption ui-xs-clamp2 postMetaInline">Twice-founder, published author, UX/IA expert. I build products that users love.</div><div class="ui-caption postMetaInline js-testPostMetaInlineSupplemental">Draft</div></div></div></div></div></header><div class="postArticle-content js-postField js-notesSource editable" id="editor_261" g_editable="true" role="textbox" contenteditable="true" data-default-value="Title
Tell your story…"><section name="3f83" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9bd9" class="graf graf--h3 graf--leading graf--title">Country house in Santa Elena, Medellin.</h3></div><div class="section-inner sectionLayout--outsetColumn"><figure tabindex="0" contenteditable="false" name="347b" class="graf graf--figure graf--layoutOutsetCenter is-defaultValue graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1000px; max-height: 750px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75%;"></div><img class="graf-image" data-image-id="1*EzclGc_jPHd1BqvTFiLe9w.jpeg" data-width="3648" data-height="2736" src="./house1_files/1_EzclGc_jPHd1BqvTFiLe9w.jpeg" data-delayed-src="https://cdn-images-1.medium.com/max/2000/1*EzclGc_jPHd1BqvTFiLe9w.jpeg"><div class="crosshair u-ignoreBlock"></div></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)"><span class="defaultValue">Type caption for image (optional)</span><br></figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="6690" class="graf graf--p graf-after--figure">We are selling a beautiful country house in Santa Elena, right outside the city of Medellin, Colombia. The house is renovated with great materials, has 3 bedrooms, a large living room and large kitchen, patios and sits on a beautiful and quiet piece of land with native trees and no neighbors. It’s perfect for retirement, people that love living in the country side but close to the city, or to AirBnB or start a countryside hostel.</p><h4 name="1552" class="graf graf--h4 graf-after--p">Location.</h4><p name="d6a6" class="graf graf--p graf-after--h4">The house sits on a quiet and private piece of land in Santa Elena, a 40 minute drive from the city, by car or by bus. Santa Elena is unique in that it’s very close to the city, yet very rural, quiet and beautiful. University professors often live here, or people who love nature yet also love the city.</p><p name="1e9c" class="graf graf--p graf-after--p">The area around Medellin has been growing tremendously the past 10 years, with the upper class of the city moving out to the close-by countryside. New apartments in this area go for 250,000 USD to 500,000 USD. There are lots of new restaurants, malls, schools that are expanding etc. in the area. Many people live here and commute into the city.&nbsp;</p><p name="f827" class="graf graf--p graf-after--p">There are beautiful protected nature reserves in Santa Elena, which again, are right next to the city. Santa Elena historically has been very safe, there have never been any safety-related problems.</p><h4 name="656d" class="graf graf--h4 graf--empty graf-after--p" data-scroll="native"><br></h4><h4 name="adec" class="graf graf--h4 graf-after--h4">The land.</h4><p name="1485" class="graf graf--p graf-after--h4">The house sits on a private piece of land with its own water spring and native trees.&nbsp;</p></div><div class="section-inner sectionLayout--outsetColumn"><figure tabindex="0" contenteditable="false" name="47eb" class="graf graf--figure graf--layoutOutsetCenter graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1000px; max-height: 380px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 38%;"></div><img class="graf-image" data-image-id="1*taLNRAlzl1Qq_KMH0Sv4Mw.jpeg" data-width="6491" data-height="2465" src="./house1_files/1_taLNRAlzl1Qq_KMH0Sv4Mw.jpeg" data-delayed-src="https://cdn-images-1.medium.com/max/2000/1*taLNRAlzl1Qq_KMH0Sv4Mw.jpeg"><div class="crosshair u-ignoreBlock"></div></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)">View of the back of the house. You can see one of the patios where we often do campfires.</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><h4 name="2f83" class="graf graf--h4 graf-after--figure">The house.</h4><p name="40e1" class="graf graf--p graf-after--h4">We bought the house about 10 years ago and rebuilt most of it from scratch.</p><p name="7660" class="graf graf--p graf--empty graf-after--p" data-scroll="native"><br></p><figure tabindex="0" contenteditable="false" name="bba3" class="graf graf--figure graf--layoutOutsetLeft is-defaultValue graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 525px; max-height: 364px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 69.3%;"></div><img class="graf-image" data-image-id="1*a9SffoNravu-iHTA_x2FDQ.png" data-width="1535" data-height="1064" src="./house1_files/1_a9SffoNravu-iHTA_x2FDQ.png" data-delayed-src="https://cdn-images-1.medium.com/max/1200/1*a9SffoNravu-iHTA_x2FDQ.png"><div class="crosshair u-ignoreBlock"></div></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)"><span class="defaultValue">Type caption for image (optional)</span><br></figcaption></figure><p name="467e" class="graf graf--p graf-after--figure">The floorplan shows a roomy kitchen with traditional tiles and a fully built-out kitchen, the large living room (“sala comedor”), the master bedroom (“alcoba principal”) which is large and private with quality wooden floors, and the master bathroom which has traditional tiles, a large bath and a roomy shower.&nbsp;</p><p name="c94c" class="graf graf--p graf-after--p">It also shows the 2 additional bedrooms. The areas around the house are covered patios, which are wonderful for an early morning breakfast, a barbecue or an afternoon glass of wine.</p><figure tabindex="0" contenteditable="false" name="0407" class="graf graf--figure graf--layoutOutsetLeft graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 525px; max-height: 700px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 133.29999999999998%;"></div><img class="graf-image" data-image-id="1*SpIAzW87fAqnH99jLwn3Kg.jpeg" data-width="2736" data-height="3648" src="./house1_files/1_SpIAzW87fAqnH99jLwn3Kg.jpeg" data-delayed-src="https://cdn-images-1.medium.com/max/1200/1*SpIAzW87fAqnH99jLwn3Kg.jpeg"><div class="crosshair u-ignoreBlock"></div></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)">Master bathroom.</figcaption></figure><p name="40c2" class="graf graf--p graf-after--figure">The master bathroom is large, the photo here shows the bath tub (with a private view of the forest). The tiling is traditional and easy to clean. Like the rest of the house, the bathroom has high and roomy ceilings.&nbsp;</p><p name="8924" class="graf graf--p graf-after--p">The entire house was rebuild 7 years ago with quality materials, the floors, roof, walls, windows are all new and well maintained.</p><p name="1e23" class="graf graf--p graf--empty graf-after--p"><br></p><p name="79fb" class="graf graf--p graf--empty graf-after--p"><br></p><p name="a311" class="graf graf--p graf--empty graf-after--p"><br></p><p name="9995" class="graf graf--p graf--empty graf-after--p"><br></p><p name="a5c9" class="graf graf--p graf--empty graf-after--p"><br></p><figure tabindex="0" contenteditable="false" name="bbf3" class="graf graf--figure graf--layoutOutsetLeft graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 525px; max-height: 349px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.4%;"></div><img class="graf-image" data-image-id="1*9PMBuiwNCp-_uZbuVbSISQ.png" data-width="1156" data-height="768" src="./house1_files/1_9PMBuiwNCp-_uZbuVbSISQ.png" data-delayed-src="https://cdn-images-1.medium.com/max/1200/1*9PMBuiwNCp-_uZbuVbSISQ.png"><div class="crosshair u-ignoreBlock"></div></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)">Smaller bedroom or&nbsp;studio.</figcaption></figure><p name="9965" class="graf graf--p graf--empty graf-after--figure"><br></p><p name="f091" class="graf graf--p graf-after--p">This is one of the smaller bedrooms or studio, which we’ve used as a children’s bedroom.&nbsp;</p><p name="548d" class="graf graf--p graf-after--p">Like the other bedrooms, it has high quality hardwood flooring that feels comfortable and warm, is easy to maintain and will last forever. This bedroom also has built-in closets for plenty of closet space for clothes etc.</p><figure tabindex="0" contenteditable="false" name="3caf" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 459px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 65.60000000000001%;"></div><img class="graf-image" data-image-id="1*k5tBJEX88dv6HoDyhEfLcg.png" data-width="1650" data-height="1082" src="./house1_files/1_k5tBJEX88dv6HoDyhEfLcg.png" data-delayed-src="https://cdn-images-1.medium.com/max/1600/1*k5tBJEX88dv6HoDyhEfLcg.png"><div class="crosshair u-ignoreBlock"></div></div><figcaption class="imageCaption" contenteditable="true" data-default-value="Type caption for image (optional)">Front porch.</figcaption></figure><p name="10ba" class="graf graf--p graf-after--figure">The front porch is covered against rain, and is a beautiful space to play, talk or drink a glass of wine.&nbsp;</p><p name="d600" class="graf graf--p graf--empty graf-after--p"><br></p><h4 name="684b" class="graf graf--h4 graf-after--p is-selected">Price.</h4><p name="3ba3" class="graf graf--p graf-after--h4">Asking price is 720,000,000 COP (about 250,000 USD or 215,000 EUR). The dollar and Euro are strong right now against the peso, so this is a good time to invest in Colombia. Similar properties in the area go for similar prices, but lack the privacy, safety and beautiful land this property sits on, and often don’t have the quality of the materials and the construction.</p><h4 name="069c" class="graf graf--h4 graf-after--p">Contact.</h4><p name="c834" class="graf graf--p graf-after--h4">Contact us at&nbsp;</p><p name="4673" class="graf graf--p graf--empty graf-after--p" data-scroll="native"><br></p><p name="6d2e" class="graf graf--p graf--empty graf-after--p"><br></p><p name="632f" class="graf graf--p graf--empty graf-after--p"><br></p><p name="107b" class="graf graf--p graf--empty graf-after--p graf--trailing"><br></p></div></div></section></div><div class="u-sm-hide u-absolute u-marginRight30 u-textColorNormal u-fontSize14 u-textAlignRight u-hide" style="top: 186px; right: 950.125px; height: 48px;"><div class="u-absolute u-left14 u-top0 u-width1 u-sizeFullHeight u-overflowHidden"><div class="js-labelBar u-borderRightLighter u-transition--transform125 u-sizeFullHeight u-absolute u-topNegative100Percent" style="transform: translate3d(0px, 48px, 0px);"></div></div><div class="js-titleLabel u-paddingTop19 u-absolute u-top0 u-right0 u-transition--transform200Spring u-transition--fadeIn200Delay150" style="transform: translate3d(0px, 0px, 0px);">Title</div><div class="js-subtitleLabel u-paddingTop11 u-absolute u-top0 u-right0 u-transition--transform200Spring u-transition--fadeOut100">Subtitle</div><div class="js-kickerLabel u-paddingTop4 u-absolute u-top0 u-right0 u-transition--transform200Spring u-transition--fadeOut100">Kicker</div></div><div class="inlineTooltip buttonScalableGroup" style="top: 2669px; left: 248px;"><button class="button button--small button--circle button--dark button--withChrome u-baseColor--buttonDark button--withIcon button--withSvgIcon button--inlineTooltipControl js-inlineTooltipControl is-touched" title="Add an image, video, embed, or new part" aria-label="Add an image, video, embed, or new part" data-action="inline-menu" tabindex="-1"><span class="svgIcon svgIcon--addMediaPlus svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M20 12h-7V5h-1v7H5v1h7v7h1v-7h7" fill-rule="evenodd"></path></svg></span></button><div class="inlineTooltip-menu"><button class="button button--small button--circle button--dark button--withChrome u-baseColor--buttonDark button--withIcon button--withSvgIcon button--scale u-transitionSeries is-touched" title="Add an image" aria-label="Add an image" data-action="inline-menu-image" tabindex="-1"><span class="svgIcon svgIcon--addMediaImage svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M4.042 17.05V8.857c0-1.088.842-1.85 1.935-1.85H8.43C8.867 6.262 9.243 5 9.6 5.01L15.405 5c.303 0 .755 1.322 1.177 2 0 .077 2.493 0 2.493 0 1.094 0 1.967.763 1.967 1.85v8.194c-.002 1.09-.873 1.943-1.967 1.943H5.977c-1.093.007-1.935-.85-1.935-1.937zm2.173-9.046c-.626 0-1.173.547-1.173 1.173v7.686c0 .625.547 1.146 1.173 1.146h12.683c.625 0 1.144-.53 1.144-1.15V9.173c0-.626-.52-1.173-1.144-1.173h-3.025c-.24-.63-.73-1.92-.873-2 0 0-5.052.006-5 0-.212.106-.87 2-.87 2l-2.915.003z"></path><path d="M12.484 15.977a3.474 3.474 0 0 1-3.488-3.49A3.473 3.473 0 0 1 12.484 9a3.474 3.474 0 0 1 3.488 3.488c0 1.94-1.55 3.49-3.488 3.49zm0-6.08c-1.407 0-2.59 1.183-2.59 2.59 0 1.408 1.183 2.593 2.59 2.593 1.407 0 2.59-1.185 2.59-2.592 0-1.406-1.183-2.592-2.59-2.592z"></path></g></svg></span></button><button class="button button--small button--circle button--dark button--withChrome u-baseColor--buttonDark button--withIcon button--withSvgIcon button--scale u-transitionSeries" title="Add an image from Unsplash" aria-label="Add an image from Unsplash" data-action="inline-menu-unsplash-image" tabindex="-1"><span class="svgIcon svgIcon--search svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"></path></svg></span></button><button class="button button--small button--circle button--dark button--withChrome u-baseColor--buttonDark button--withIcon button--withSvgIcon button--scale u-transitionSeries" title="Add a video" aria-label="Add a video" data-action="inline-menu-embed" data-action-value="Paste a YouTube, Vine, Vimeo, or other video link, and press Enter" tabindex="-1"><span class="svgIcon svgIcon--addMediaVideo svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M18.8 11.536L9.23 5.204C8.662 4.78 8 5.237 8 5.944v13.16c0 .708.662 1.165 1.23.74l9.57-6.33c.514-.394.606-1.516 0-1.978zm-.993 1.45l-8.294 5.267c-.297.213-.513.098-.513-.264V7.05c0-.36.218-.477.513-.264l8.294 5.267c.257.21.257.736 0 .933z" fill-rule="evenodd"></path></svg></span></button><button class="button button--small button--circle button--dark button--withChrome u-baseColor--buttonDark button--withIcon button--withSvgIcon button--scale u-transitionSeries" title="Add an embed" aria-label="Add an embed" data-action="inline-menu-embed" data-action-value="Paste a link to embed content from another site (e.g. Twitter) and press Enter" tabindex="-1"><span class="svgIcon svgIcon--addMediaEmbed svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M9.826 7.698l-4.828 4.828 4.828 4.828.652-.7-4.08-4.128L10.53 8.4"></path><path d="M14.514 8.4l4.177 4.126-4.17 4.127.7.7 4.83-4.827-4.83-4.828"></path></g></svg></span></button><button class="button button--small button--circle button--dark button--withChrome u-baseColor--buttonDark button--withIcon button--withSvgIcon button--scale u-transitionSeries" title="Add a new part" aria-label="Add a new part" data-action="inline-menu-hr" tabindex="-1"><span class="svgIcon svgIcon--addMediaPart svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M8.45 12H5.3c-.247 0-.45.224-.45.5 0 .274.203.5.45.5h5.4c.247 0 .45-.226.45-.5 0-.276-.203-.5-.45-.5H8.45z"></path><path d="M17.45 12H14.3c-.247 0-.45.224-.45.5 0 .274.203.5.45.5h5.4c.248 0 .45-.226.45-.5 0-.276-.202-.5-.45-.5h-2.25z"></path></g></svg></span></button></div></div><footer class="u-paddingTop10"></footer></article></main><div class="drawer u-textAlignCenter js-drawer u-hide" data-action-scope="_actionscope_35"><button class="button button--close button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon" data-action="toggle-drawer"><span class="svgIcon svgIcon--removeThin svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61" fill-rule="evenodd"></path></svg></span></button><div class="drawer-inner u-alignMiddle"><button class="button button--large button--circle button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon" title="Show previous tip" aria-label="Show previous tip" data-action="previous-tip"><span class="svgIcon svgIcon--arrowLeft svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M18.663 24.927L8.2 14.463 18.663 4l1.29 1.147-9.316 9.316 9.316 9.317z" fill-rule="evenodd"></path></svg></span></button><div class="drawer-content u-alignBlock js-drawerTip"></div><button class="button button--large button--circle button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon" title="Show next tip" aria-label="Show next tip" data-action="next-tip"><span class="svgIcon svgIcon--arrowRight svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M9.147 4l10.606 10.463L9.147 24.927 8 23.78l9.317-9.317L8 5.147z" fill-rule="evenodd"></path></svg></span></button></div></div><div class="u-translateNegative100Percent u-absolute u-top0 u-left0"><div class="js-dragPlaceholder u-width200"></div></div><div class="u-absolute u-backgroundGreenNormal u-transparent"></div><div class="highlightMenu" data-action-scope="_actionscope_34" style="left: 518px; top: 2079px;"><div class="highlightMenu-inner highlightMenu-media"><div class="buttonSet"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="media-transform" data-action-value="4" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--imageOutsetLeft svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M2 16.99V9.047c0-.112.042-.22.123-.32a.384.384 0 0 1 .32-.152h11.93c.102 0 .2.05.296.15.09.103.14.21.14.322v7.943c0 .122-.05.225-.14.31a.44.44 0 0 1-.31.13H2.44a.427.427 0 0 1-.44-.44zm5.847 3.517v-.87c0-.1.038-.194.114-.28.08-.086.17-.13.27-.13h14.22c.13 0 .23.046.32.14.09.09.14.18.14.27v.87a.42.42 0 0 1-.14.332c-.09.08-.19.13-.31.13H8.23a.34.34 0 0 1-.274-.14.545.545 0 0 1-.107-.34zm0-14.108v-.92c0-.13.038-.23.114-.32a.35.35 0 0 1 .27-.13h14.22c.13 0 .23.04.32.13s.14.19.14.31v.92c0 .09-.04.18-.14.26-.09.08-.19.13-.31.13H8.23c-.1 0-.19-.05-.267-.13a.447.447 0 0 1-.11-.27zm8.497 7.09v-.9c0-.15.048-.27.144-.37a.477.477 0 0 1 .328-.14l5.624-.01c.12 0 .23.04.32.14.093.09.14.21.14.36v.9c0 .11-.047.21-.14.32-.09.1-.2.15-.32.15l-5.625.01c-.12 0-.23-.05-.327-.15a.467.467 0 0 1-.144-.33zm0-3.58v-.86c0-.11.048-.22.144-.32.097-.1.207-.16.328-.15l5.624-.01c.12 0 .23.05.32.15.092.1.14.21.14.32v.87c0 .13-.047.24-.14.32-.09.08-.2.12-.32.12l-5.625.01a.45.45 0 0 1-.334-.13.408.408 0 0 1-.13-.32zm0 7.04v-.9c0-.15.05-.27.146-.37a.474.474 0 0 1 .327-.14l5.624-.01c.13 0 .23.04.33.14.09.09.14.21.14.36v.89c0 .11-.04.21-.13.32-.09.1-.2.15-.32.15l-5.62.01c-.12 0-.23-.05-.32-.16a.485.485 0 0 1-.14-.32z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="media-transform" data-action-value="1" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--imageInsetCenter svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M5 20.558v-.9c0-.122.04-.226.122-.312a.404.404 0 0 1 .305-.13h13.347a.45.45 0 0 1 .32.13c.092.086.138.19.138.312v.9a.412.412 0 0 1-.138.313.435.435 0 0 1-.32.13H5.427a.39.39 0 0 1-.305-.13.432.432 0 0 1-.122-.31zm0-3.554V9.01c0-.12.04-.225.122-.31a.4.4 0 0 1 .305-.13h13.347c.122 0 .23.043.32.13.092.085.138.19.138.31v7.994a.462.462 0 0 1-.138.328.424.424 0 0 1-.32.145H5.427a.382.382 0 0 1-.305-.145.501.501 0 0 1-.122-.328zM5 6.342v-.87c0-.12.04-.23.122-.327A.382.382 0 0 1 5.427 5h13.347c.122 0 .23.048.32.145a.462.462 0 0 1 .138.328v.87c0 .12-.046.225-.138.31a.447.447 0 0 1-.32.13H5.427a.4.4 0 0 1-.305-.13.44.44 0 0 1-.122-.31z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu is-active" data-action="media-transform" data-action-value="3" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--imageOutsetCenter svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M3 17.004V9.01a.4.4 0 0 1 .145-.31.476.476 0 0 1 .328-.13h17.74c.12 0 .23.043.327.13a.4.4 0 0 1 .145.31v7.994a.404.404 0 0 1-.145.313.48.48 0 0 1-.328.13H3.472a.483.483 0 0 1-.327-.13.402.402 0 0 1-.145-.313zm2.212 3.554v-.87c0-.13.05-.243.145-.334a.472.472 0 0 1 .328-.137H19c.124 0 .23.045.322.137a.457.457 0 0 1 .138.335v.86c0 .12-.046.22-.138.31a.478.478 0 0 1-.32.13H5.684a.514.514 0 0 1-.328-.13.415.415 0 0 1-.145-.32zm0-14.246v-.84c0-.132.05-.243.145-.334A.477.477 0 0 1 5.685 5H19a.44.44 0 0 1 .322.138.455.455 0 0 1 .138.335v.84a.451.451 0 0 1-.138.334.446.446 0 0 1-.32.138H5.684a.466.466 0 0 1-.328-.138.447.447 0 0 1-.145-.335z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="media-transform" data-action-value="5" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--imageFillWidth svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M4.027 17.24V5.492c0-.117.046-.216.14-.3a.453.453 0 0 1 .313-.123h17.007c.117 0 .22.04.313.12.093.08.14.18.14.3v11.74c0 .11-.046.21-.14.3a.469.469 0 0 1-.313.12H4.48a.432.432 0 0 1-.314-.13.41.41 0 0 1-.14-.3zm2.943 3.407v-.833a.45.45 0 0 1 .122-.322.387.387 0 0 1 .276-.132H18.61a.35.35 0 0 1 .27.132.472.472 0 0 1 .116.322v.833c0 .117-.04.216-.116.3a.361.361 0 0 1-.27.123H7.368a.374.374 0 0 1-.276-.124.405.405 0 0 1-.122-.3z" fill-rule="evenodd"></path></svg></span></button></div></div><div class="highlightMenu-arrowClip"><span class="highlightMenu-arrow"></span></div></div><div class="highlightMenu" data-action-scope="_actionscope_32" style="left: 162px; top: 5217px;"><div class="highlightMenu-inner"><div class="buttonSet"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" disabled="disabled" data-action="bold" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--bold svgIcon--21px"><svg class="svgIcon-use" width="21" height="21" viewBox="0 0 21 21"><path d="M10.308 17.993h-5.92l.11-.894.783-.12c.56-.11.79-.224.79-.448V5.37c0-.225-.113-.336-.902-.448H4.5l-.114-.894h6.255c4.02 0 5.58 1.23 5.58 3.13 0 1.896-1.78 3.125-3.79 3.463v.11c2.69.34 4.25 1.56 4.25 3.57 0 2.35-2.01 3.69-6.37 3.69l.02.01h-.02zm-.335-12.96H8.967V10.5h1.23c1.788 0 2.79-1.23 2.79-2.683 0-1.685-1.004-2.803-3.006-2.803v.02zm-.223 6.36h-.783v5.588l1.225.23h.22c1.67 0 3.01-1.004 3.01-2.792 0-2.122-1.566-3.016-3.69-3.016h.018z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" disabled="disabled" data-action="italic" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--italic svgIcon--21px"><svg class="svgIcon-use" width="21" height="21" viewBox="0 0 21 21"><path d="M9.847 18.04c-.533 0-2.027-.64-1.92-.853l2.027-7.68-.64-.214-1.387 1.494-.427-.427c.534-1.173 1.707-2.667 2.774-2.667.533 0 2.24.534 2.133.854l-2.133 7.786.533.214 1.6-1.067.427.427c-.64 1.066-1.92 2.133-2.987 2.133zm2.347-11.733c-.96 0-1.387-.64-1.387-1.387 0-1.067.747-1.92 1.493-1.92.854 0 1.387.64 1.387 1.493-.107 1.067-.747 1.814-1.493 1.814z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="link" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--link svgIcon--21px"><svg class="svgIcon-use" width="21" height="21" viewBox="0 0 21 21"><path d="M2.2 13.17c0-.575.125-1.11.375-1.605l.02-.018v-.02c.014 0 .02-.008.02-.02 0-.014 0-.02.02-.02.122-.256.31-.52.576-.805l3.19-3.18c0-.008 0-.015.01-.02.01-.006.01-.013.01-.02.44-.413.91-.7 1.44-.853-.63.71-1.03 1.5-1.19 2.36-.04.24-.06.52-.06.81 0 .14.01.24.02.33L4.67 12.1c-.19.19-.316.407-.376.653a1.33 1.33 0 0 0-.057.415c0 .155.02.314.06.477.075.21.2.403.376.58l1.286 1.31c.27.276.62.416 1.03.416.42 0 .78-.14 1.06-.42l1.23-1.25.79-.78 1.15-1.16c.08-.09.19-.22.28-.4.103-.2.15-.42.15-.67 0-.16-.02-.31-.056-.45l-.02-.02v-.02l-.07-.14c0-.01-.013-.03-.04-.06l-.06-.13-.02-.02c0-.02-.01-.03-.02-.05a.592.592 0 0 0-.143-.16l-.48-.5c0-.042.015-.1.04-.15l.06-.12 1.17-1.14.087-.09.56.57c.023.04.08.1.16.18l.05.04c.006.018.02.036.035.06l.04.054c.01.01.02.025.03.04.03.023.04.046.04.058.04.04.08.09.1.14l.02.02c0 .018.01.03.024.04l.105.197v.02c.098.157.19.384.297.68a1 1 0 0 1 .04.255c.06.21.08.443.08.7 0 .22-.02.43-.06.63-.12.71-.44 1.334-.95 1.865l-.66.67-.97.972-1.554 1.57C8.806 17.654 7.98 18 7.01 18s-1.8-.34-2.487-1.026l-1.296-1.308a3.545 3.545 0 0 1-.913-1.627 4.541 4.541 0 0 1-.102-.88v-.01l-.012.01zm5.385-3.433c0-.183.023-.393.07-.63.13-.737.448-1.362.956-1.87l.66-.662.97-.983 1.56-1.56C12.48 3.34 13.3 3 14.27 3c.97 0 1.8.34 2.483 1.022l1.29 1.314c.44.438.744.976.913 1.618.067.32.102.614.102.87 0 .577-.123 1.11-.375 1.605l-.02.01v.02l-.02.04c-.148.27-.35.54-.6.81l-3.187 3.19c0 .01 0 .01-.01.02-.01 0-.01.01-.01.02-.434.42-.916.7-1.427.83.63-.67 1.03-1.46 1.19-2.36.04-.26.06-.53.06-.81 0-.14-.01-.26-.02-.35l1.99-1.97c.18-.21.3-.42.35-.65.04-.12.05-.26.05-.42 0-.16-.02-.31-.06-.48-.07-.19-.19-.38-.36-.58l-1.3-1.3a1.488 1.488 0 0 0-1.06-.42c-.42 0-.77.14-1.06.41L11.98 6.7l-.79.793-1.157 1.16c-.088.075-.186.21-.294.4-.09.233-.14.46-.14.67 0 .16.02.31.06.452l.02.02v.023l.06.144c0 .006.01.026.05.06l.06.125.02.02c0 .01 0 .013.01.02 0 .005.01.01.01.02.05.08.1.134.14.16l.47.5c0 .04-.02.093-.04.15l-.06.12-1.15 1.15-.1.08-.56-.56a2.31 2.31 0 0 0-.18-.187c-.02-.01-.02-.03-.02-.04l-.02-.02a.375.375 0 0 1-.1-.122c-.03-.024-.05-.043-.05-.06l-.1-.15-.02-.02-.02-.04L8 11.4v-.02a5.095 5.095 0 0 1-.283-.69 1.035 1.035 0 0 1-.04-.257 2.619 2.619 0 0 1-.093-.7v.007z" fill-rule="evenodd"></path></svg></span></button><div class="buttonSet-separator"></div><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="h3" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--tBigger svgIcon--21px"><svg class="svgIcon-use" width="21" height="21" viewBox="0 0 21 21"><path d="M3 2v4.747h1.656l.383-2.568.384-.311h3.88V15.82l-.408.38-1.56.12V18h7.174v-1.68l-1.56-.12-.407-.38V3.868h3.879l.36.311.407 2.568h1.656V2z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu is-active" data-action="h4" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--tSmaller svgIcon--21px"><svg class="svgIcon-use" width="21" height="21" viewBox="0 0 21 21"><path d="M4 5.5v4.74h1.657l.384-2.569.384-.312h2.733v8.461l-.41.38-1.91.12V18h7.179v-1.68l-1.912-.12-.405-.38V7.359h2.729l.36.312.408 2.57h1.657V5.5z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="cycle-quote" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--blockquote svgIcon--21px"><svg class="svgIcon-use" width="21" height="21" viewBox="0 0 21 21" data-multipart="true"><path d="M15.48 18.024c-2.603 0-4.45-2.172-4.45-4.778 0-3.263 2.498-6.3 6.517-8.803l1.297 1.303c-2.497 1.63-3.91 3.042-3.91 5.214 0 2.824 3.91 3.582 3.91 3.91.11 1.41-1.194 3.15-3.366 3.15h.004v.004z"></path><path d="M6.578 18.024c-2.606 0-4.453-2.172-4.453-4.778 0-3.263 2.497-6.3 6.515-8.803l1.303 1.303c-2.606 1.63-3.907 3.042-3.907 5.106 0 2.823 3.91 3.58 3.91 3.91 0 1.518-1.304 3.257-3.368 3.257z"></path></svg></span></button><div class="buttonSet-separator"></div><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="highlight" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--privatenoteFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M17.662 4.552H7.346A4.36 4.36 0 0 0 3 8.898v5.685c0 2.168 1.614 3.962 3.697 4.28v2.77c0 .303.35.476.59.29l3.904-2.994h6.48c2.39 0 4.35-1.96 4.35-4.35V8.9c0-2.39-1.95-4.346-4.34-4.346zM16 14.31a.99.99 0 0 1-1.003.99h-4.994C9.45 15.3 9 14.85 9 14.31v-3.02a.99.99 0 0 1 1-.99v-.782a2.5 2.5 0 0 1 2.5-2.51c1.38 0 2.5 1.13 2.5 2.51v.782c.552.002 1 .452 1 .99v3.02z"></path><path d="M14 9.81c0-.832-.674-1.68-1.5-1.68-.833 0-1.5.84-1.5 1.68v.49h3v-.49z"></path></g></svg></span></button></div><div class="highlightMenu-linkinput"><input class="highlightMenu-linkinputField" type="text" placeholder="Paste or type a link…"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="cancelLink" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--removeThin svgIcon--19px"><svg class="svgIcon-use" width="19" height="19" viewBox="0 0 19 19"><path d="M13.792 4.6l-4.29 4.29-4.29-4.29-.612.613 4.29 4.29-4.29 4.29.613.612 4.29-4.29 4.29 4.29.612-.613-4.29-4.29 4.29-4.29" fill-rule="evenodd"></path></svg></span></button></div></div><div class="highlightMenu-arrowClip"><span class="highlightMenu-arrow"></span></div></div></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://medium.com","buildLabel":"34355-ee60822","currentUser":{"userId":"b4fca1ba9239","username":"petervandijck","name":"Peter Van Dijck","email":"petervandijck@gmail.com","bio":"Twice-founder, published author, UX/IA expert. I build products that users love.","imageId":"0*RdMeXz7X25PLJkVe.jpeg","twitterScreenName":"petervandijck","createdAt":1345047528595,"lastPostCreatedAt":1504983014405,"isVerified":true,"subscriberEmail":"","googleAccountId":"113278766329192120580","googleEmail":"petervandijck@gmail.com","hasPastMemberships":false,"isEnrolledInHightower":false,"isEligibleForHightower":true,"hightowerLastLockedAt":0,"isWriterProgramEnrolled":false,"isWriterProgramInvited":false},"currentUserHasUnverifiedEmail":false,"isAuthenticated":true,"isCurrentUserVerified":true,"language":"en-us","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.WmwB0IIF2Agp7_PHA0B9_A.js","common-async":"https://cdn-static-1.medium.com/_/fp/gen-js/main-common-async.bundle.JBH4hHANmtwNdI1d_LbO_w.js","hightower":"https://cdn-static-1.medium.com/_/fp/gen-js/main-hightower.bundle.ivo5gLlwWuV8u6Ca-6fiMw.js","home-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-home-screens.bundle.HZc7-ajNH_uYiagmsPhv_Q.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-misc-screens.bundle.T0ewqfU6x4uveFJsQeZojQ.js","notes":"https://cdn-static-1.medium.com/_/fp/gen-js/main-notes.bundle.V9EzOjHJ3ICCaIdpNAzmTA.js","payments":"https://cdn-static-1.medium.com/_/fp/gen-js/main-payments.bundle.D50JWm3TZgDVujfNhXZ1vA.js","posters":"https://cdn-static-1.medium.com/_/fp/gen-js/main-posters.bundle.ZfxiW37YEu6fNe5U2l9NxQ.js","power-readers":"https://cdn-static-1.medium.com/_/fp/gen-js/main-power-readers.bundle.rICP9DADvGw1M5hHVVn_HA.js","pubs":"https://cdn-static-1.medium.com/_/fp/gen-js/main-pubs.bundle.uVE6TR4iIvTHCN-mQRjCjw.js","stats":"https://cdn-static-1.medium.com/_/fp/gen-js/main-stats.bundle.xwgz8u1daJB0ABSweTA1ag.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":true,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1531924021085:86a159807c1b","useragent":{"browser":"chrome","family":"chrome","os":"mac","version":67,"supportsDesktopEdit":true,"supportsInteract":true,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":true,"isTier1":true,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":true,"supportsVhUnits":true,"ruinsViewportSections":false,"supportsHtml5Video":true,"supportsMagicUnderlines":true,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":true,"supportsPromotedPosts":true,"isBot":false,"isNativeIphone":false,"supportsCssVariables":true,"supportsVideoSections":true,"emojiSupportLevel":5,"isSearchBot":false,"isSyndicationBot":false,"supportsScrollableMetabar":true},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv","signup_services":"twitter,facebook,google,email,google-fastidv","android_rating_prompt_recommend_threshold":5,"google_sign_in_android":true,"reengagement_notification_duration":3,"browsable_stream_config_bucket":"curated-topics","enable_dedicated_series_tab_api_ios":true,"enable_post_import":true,"available_monthly_plan":"60e220181034","available_annual_plan":"2c754bcc2995","disable_ios_resume_reading_toast":true,"is_not_medium_subscriber":true,"disable_followed_tag_fan_out":true,"glyph_font_set":"m2","enable_branding":true,"enable_branding_fonts":true,"enable_sequence_carousel":true,"enable_multirecommends":true,"enable_post_monger_v2":true,"enable_post_monger_v3":true,"enable_fastrak_beta":true,"enable_fastrak_lock_tiered_post_in_pub":true,"enable_user_post_metering":true,"enable_direct_upsell_expanded_in_meter":true,"enable_sticky_meter":true,"max_premium_content_per_user_under_metering":3,"tag_intercom_user_on_metering_count":3,"enable_automated_mission_control_triggers":true,"enable_topic_writer_onboarding":true,"enable_strong_graph_chp_reorder":true,"enable_top_stories_for_you":true,"enable_ios_member_post_labeling":true,"enable_lite_profile":true,"enable_li_search_collection":true,"enable_homepage_remodel":true,"enable_signin_wall_custom_domain":true,"enable_standalone_profile_edit_page":true,"enable_standalone_user_follow_pages":true,"enable_post_footer_copy":true,"app_download_email_template":"control","enable_topic_lifecycle_email":true,"enable_marketing_emails":true,"enable_curation_post_locking":true,"ios_hide_avatars_on_home":true,"raise_editors_picks_digest":"control","android_disable_author_avatars":true,"enable_quality_pool_filters":true,"enable_truncated_rss_for_tags_and_topics":true,"enable_ios_related_reads_api_change":true,"enable_ios_related_reads_ui_large":true,"enable_ios_responses_collapsed":true,"enable_hightower_friend_link":true,"enable_parsely":true,"enable_quality_pool_for_homepage_only":true,"enable_curation_master_feed":true,"enable_july_meter_email_test":true,"enable_send_editors_picks_to_all_users":true,"accelerate_membership_headline_test":"control"},"xsrfToken":"siWvhbQcrpFj","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","fp":{"/icons/monogram-mask.svg":"https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":true,"algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"394474ced050e3911ae2249ecc774921","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico","faviconImageId":"1*8I-HPL0bfoIzGied-dzOvA.png","fontSets":[{"id":8,"url":"https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css"},{"id":11,"url":"https://glyph.medium.com/css/m2.css"},{"id":9,"url":"https://glyph.medium.com/css/mkt.css"},{"id":10,"url":"https://glyph.medium.com/css/elv8.css"}],"editorFaviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium-editor.3Y6xpZ-0FSdWDnPM3hSBIA.ico","glyphUrl":"https://glyph.medium.com"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"182a0e4f7cf22c74\",\"ot-tracer-traceid\":\"2062d194210fb098\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","namespace":"medium-com","scope":{"default":["public_profile","email","user_friends"],"connect":["public_profile","email","user_friends"],"login":["public_profile","email","user_friends"],"share":["public_profile","email","user_friends","publish_actions"]}},"editorsPicksTopicId":"3985d2a191c5","popularOnMediumTopicId":"9d34e48ecf94","memberContentTopicId":"13d7efd82fb2","audioContentTopicId":"3792abbd134","brandedSequenceId":"7d337ddf1941","isDoNotAuth":false,"goldfinchUrl":"https://goldfinch.medium.com","buggle":{"url":"https://buggle.medium.com","videoUrl":"https://cdn-videos-1.medium.com","audioUrl":"https://cdn-audio-1.medium.com"},"referrerType":1,"isMeteredOut":false,"meterConfig":{"maxUnlockCount":3,"windowLength":"MONTHLY"},"partnerProgramEmail":"partnerprogram@medium.com","userResearchPrompts":[{"promptId":"li_post_page","type":0,"url":"www.calendly.com"},{"promptId":"li_home_page","type":1,"url":"mediumuserfeedback.typeform.com/to/GcFjEO"},{"promptId":"li_profile_page","type":2,"url":"www.calendly.com"}],"recaptchaKey":"6LdAokEUAAAAAC7seICd4vtC8chDb3jIXDQulyUJ","paypalClientMode":"production","signinWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"countryCode":"CO","bypassMeter":false}
// ]]></script><script charset="UTF-8" src="./house1_files/main-base.bundle.WmwB0IIF2Agp7_PHA0B9_A.js" async=""></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"45b714dfbed1","versionId":"90de78217a6","creatorId":"1f27dffb5ff4","creator":{"userId":"1f27dffb5ff4","name":"Antin Harasymiv","username":"antin","createdAt":1345007376686,"lastPostCreatedAt":1531713843284,"imageId":"1*UqbFGaRIKG9UnJwoh1ApCw.png","backgroundImageId":"","bio":"UX Engineer @Google","twitterScreenName":"antin","socialStats":{"userId":"1f27dffb5ff4","usersFollowedCount":27,"usersFollowedByCount":594,"type":"SocialStats"},"social":{"userId":"b4fca1ba9239","targetUserId":"1f27dffb5ff4","type":"Social"},"facebookAccountId":"1940376042688552","allowNotes":1,"isNsfw":false,"isWriterProgramInvited":false,"isPartnerProgramEnrolled":false,"isWriterProgramEnrolled":false,"type":"User"},"homeCollection":{"id":"2935d33b43a8","name":"Google Design","slug":"google-design","tags":["GOOGLE","MATERIAL DESIGN","UX DESIGN"],"creatorId":"6edd8fab00b6","description":"Google Design is a cooperative effort led by a group of designers, writers, and developers at Google to support and further design and technology. Our Medium collection features highlights from design.google, and original content written by designers and engineers at Google.","shortDescription":"Google Design is a cooperative effort led by a group of…","image":{"imageId":"1*RGUDs-7Iegr7UOmlu4lmpg.png","filter":"","backgroundSize":"","originalWidth":60,"originalHeight":60,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":112799,"activeAt":1531241796543},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*DAhCtCQXf8jbjJEXPTsLYw.png","filter":"","backgroundSize":"","originalWidth":352,"originalHeight":73,"strategy":"resample","height":0,"width":0},"twitterUsername":"googledesign","publicEmail":"design@google.com","collectionMastheadId":"be4d1050b17a","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Google Design","description":"Supporting the future of design and technology","backgroundImage":{},"logoImage":{"id":"1*-v207691raOmUc6vTWHx5g@2x.png","originalWidth":280,"originalHeight":280,"alt":"Google Design"},"alignment":1,"layout":6}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":1,"postIds":["45b714dfbed1"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["60499be68b25","85a010840f7b","c41f4018bc5"]}},{"type":1,"postListMetadata":{"source":2,"layout":4,"number":3,"postIds":[],"sectionHeader":"Top stories by designers at Google"}},{"type":1,"postListMetadata":{"source":1,"layout":6,"number":25,"postIds":[],"sectionHeader":"Latest"}}],"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF02B875","point":0},{"color":"#FF00AB6B","point":0.1},{"color":"#FF1C9963","point":0.2},{"color":"#FF092E20","point":1}],"backgroundColor":"#FFFFFFFF"},"highlightSpectrum":{"colorPoints":[{"color":"#FFFFFFFF","point":0},{"color":"#FFE9FDF0","point":0.1},{"color":"#FFE2FAEE","point":0.2},{"color":"#FFADFFCF","point":0.6},{"color":"#FF7DFFB3","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":1,"title":"Google","tagSlug":"google","url":"https://medium.com/google-design/tagged/google","source":"tagSlug"},{"type":1,"title":"How-Tos","tagSlug":"how-to","url":"https://medium.com/google-design/tagged/how-to","source":"tagSlug"},{"type":1,"title":"Career Advice","tagSlug":"career-advice","url":"https://medium.com/google-design/tagged/career-advice","source":"tagSlug"},{"type":1,"title":"Material","tagSlug":"material-design","url":"https://medium.com/google-design/tagged/material-design","source":"tagSlug"},{"type":5,"title":"Archive","url":"https://medium.com/google-design/archive"},{"type":3,"title":"Sign up for our newsletter","url":"https://services.google.com/fb/forms/google-design-updates/"}],"colorBehavior":1,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Google Design","description":"Supporting the future of design and technology","backgroundImage":{},"logoImage":{"id":"1*-v207691raOmUc6vTWHx5g@2x.png","originalWidth":280,"originalHeight":280,"alt":"Google Design"},"alignment":1,"layout":6},"type":"Collection"},"homeCollectionId":"2935d33b43a8","title":"Building the Google Photos Web UI","detectedLanguage":"en","latestVersion":"90de78217a6","latestPublishedVersion":"90de78217a6","hasUnpublishedEdits":false,"latestRev":5773,"createdAt":1529546291689,"updatedAt":1531414309695,"acceptedAt":0,"firstPublishedAt":1531241795946,"latestPublishedAt":1531266154697,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"A peek under the hood","bodyModel":{"paragraphs":[{"name":"d213","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*GfYo2WZaEjsfGjKKCmkXdw.png","originalWidth":2000,"originalHeight":670}},{"name":"7403","type":3,"text":"Building the Google Photos Web UI","markups":[]},{"name":"b15a","type":13,"text":"A peek under the hood","markups":[]},{"name":"226d","type":1,"text":"A few years ago I had the privilege of being an engineer on the Google Photos team and part of the initial launch in 2015. A lot of people contributed to the product — designers, product managers, researchers, and countless engineers (across Android, iOS, Web, and the server) to name just some of the major roles. My responsibility was the web UI, and more specifically the photo grid.","markups":[{"type":3,"start":64,"end":77,"href":"https://photos.google.com/","title":"","rel":"","anchorType":0},{"type":3,"start":107,"end":113,"href":"https://googleblog.blogspot.com/2015/05/picture-this-fresh-approach-to-photos.html","title":"","rel":"","anchorType":0}]},{"name":"144d","type":1,"text":"We wanted to try something ambitious and simultaneously support a full-width (justified) layout, preserve the aspect–ratio of each photo, be scrubbable (ie let you jump to any section of your archive), handle hundreds-of-thousands of photos, scroll at 60fps, and load near instantly.","markups":[{"type":1,"start":78,"end":87},{"type":1,"start":110,"end":122},{"type":1,"start":141,"end":152},{"type":1,"start":209,"end":230},{"type":1,"start":252,"end":257},{"type":1,"start":273,"end":282}]},{"name":"0d3b","type":1,"text":"At the time no other photo gallery supported all of this, and to the best of my knowledge they still don’t. While many other galleries now support some of these features they usually square crop each photo to make the layout work.","markups":[]},{"name":"c395","type":1,"text":"Here is a technical write up about how we solved those challenges, and a peek under the hood of how the web version of Google Photos works.","markups":[]},{"name":"7bf4","type":13,"text":"Why was this hard?","markups":[]},{"name":"a6d6","type":1,"text":"The two biggest challenges both come down to size.","markups":[]},{"name":"f6ee","type":1,"text":"The first size challenge is that for users with large photo collections (and some users have over a quarter-million photos uploaded) there is simply too much metadata. Sending even minimal information (the photo urls, width, height, and timestamps) is many megabytes of data for a full collection, this would directly run counter to our goal of near-instant loading.","markups":[{"type":1,"start":345,"end":357}]},{"name":"6c06","type":1,"text":"The second size challenge is the photos themselves. With modern HDPI screens, even a small photo thumbnail is often 50KB or more. A thousand thumbnails may be 50 megabytes, and not only is that a lot to download, if you try to place them all in the webpage immediately you can slow down the browser. The old Google+ Photos would become sluggish after scrolling through 1000–2000 photos and Chrome would eventually crash the tab after loading 10000.","markups":[]},{"name":"cf44","type":1,"text":"Let’s break down the discussion into the various parts (you can search for the bolded title to go straight there).","markups":[]},{"name":"0668","type":10,"text":"Scrubbable Photos — the ability to quickly jump to any part of the photo library.","markups":[{"type":1,"start":0,"end":17}]},{"name":"85c6","type":10,"text":"Justified Layout — fill the width of the browser and preserve the aspect-ratio of each photo (no square crops).","markups":[{"type":1,"start":0,"end":17}]},{"name":"32d7","type":10,"text":"60fps Scrolling — ensuring the page remains responsive even when looking at many thousands of photos.","markups":[{"type":1,"start":0,"end":16}]},{"name":"a0ac","type":10,"text":"Instantaneous Feel —minimize the time waiting for anything to load.","markups":[{"type":1,"start":0,"end":18}]},{"name":"2522","type":3,"text":"1. Scrubbable Photos","markups":[]},{"name":"f4b6","type":1,"text":"There are a few approaches to dealing with large collections. The oldest is probably pagination, where you show a fixed number of results and click “next” to see the subsequent batch, ad nauseam. A more popular modern approach is infinite scrolling, so named because while you only load a fixed number of results as you scroll closer to the end you automatically fetch the next batch and insert it in the page, repeatedly; if done well the user can keep scrolling continuously (seemingly infinitely) without ever needing to stop.","markups":[{"type":1,"start":85,"end":95},{"type":1,"start":230,"end":248},{"type":2,"start":488,"end":498}]},{"name":"1490","type":1,"text":"Both pagination and infinite scrolling share a similar drawback in that you need to load all the earliest content to get to the end, so finding that photo from years ago can become a chore.","markups":[]},{"name":"abe1","type":1,"text":"For a normal document the scrollbar functions how you’d expect, and better still you can grab it and quickly skip over entire sections to jump straight to the end, or to any other point. With pagination the scrollbar will hit the bottom of the page (but not the library), and for an infinitely scrolling page the scrollbar is always changing, if you drag to the end you’ll notice it scoot back a little as the page grows longer.","markups":[]},{"name":"aab0","type":6,"text":"A scrubbable photo grid presents a third option, one where the scrollbar behaves properly.","markups":[]},{"name":"3ec7","type":1,"text":"To support jumping to any section of photos we need to pre-allocate space on the page so that the scrollbar is representative. That would be relatively easy if we had the information for all photos, but as it’s too much to send, we need to do so in a different way.","markups":[]},{"name":"89e8","type":1,"text":"This is where many of the other scrubbable galleries take a shortcut — they crop every photo into an identical square shape. This way, you only need to know the total number of photos to calculate the entire page layout: for a given square size you can trivially take the width of the viewport and use it to calculate the number of columns and rows:","markups":[]},{"name":"8f0e","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"209260aa20e6246ac832e31ff4311568","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F7492189%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"1821","type":1,"text":"For only three lines of code the sizing is done, and then to render and position the photos it’s barely a dozen more.","markups":[]},{"name":"92ec","type":1,"text":"The approach we came up with to reduce the initial size of the metadata was to subdivide a user’s collection of photos into discrete sections, and on initial load send the sections and counts. For example, a simple way to section photos would be by month — you can count these on the server (or pre-compute them) and even for millions of photos spanning decades it is still a trivial amount of data. A very basic representation of the data may look like this:","markups":[]},{"name":"ab4e","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"eaf45b75199f4765c60a5958d752df92","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F7492189%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"8885","type":1,"text":"In extreme cases this could still have problems for users who take a lot of photos in a given month (eg professional photographers) — the goal of sections is to reduce every bucket to a manageable amount of metadata, but for heavy users a month may still contain many thousands of photos (and thus megabytes of data). Thankfully the clever infrastructure team outdid themselves and built a sophisticated solution that takes all sorts of things into account (eg geolocation, proximate timestamps, etc…) creating custom sections for each user.","markups":[]},{"name":"9950","type":4,"text":"The photos grid is divided into sections, segments, and tiles,","markups":[],"layout":4,"metadata":{"id":"1*sB87boWM7XYi7gftNNRRDg.png","originalWidth":916,"originalHeight":1090}},{"name":"7eb3","type":1,"text":"With that information, the client can estimate how much space each section will need and put a placeholder into the DOM, and then when the user scrolls quickly, retrieve the corresponding photo metadata from the server, compute the full layout, and update the page.","markups":[]},{"name":"e027","type":1,"text":"On the client, once we have the metadata for a section, we actually go one step further and segment the photos in each section into the individual days. We discussed dynamic segmentation (eg by location, person, date, etc…) which could still make a great future feature.","markups":[]},{"name":"36d5","type":1,"text":"Estimating the section sizes turned out to be remarkably easy, you can just take the count of photos for a section and multiply it by a best guess at a normal aspect ratio:","markups":[]},{"name":"d765","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"f087e16c4df4bffcc6bf71ba6d002527","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F7492189%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"f8d9","type":6,"text":"You may be asking yourself how could this possibly be accurate? The truth is it isn’t, not even close.","markups":[]},{"name":"baf2","type":1,"text":"It’s fortunate that I initially overthought this part of the problem (for reasons I’ll explain in the Layout section) but it turns out that you don’t need the estimate to be very good (and for large numbers of photos it is often wrong by tens of thousands of pixels). The only important thing is that the estimate is vaguely representative so that the scrollbar keeps the appearance of accuracy.","markups":[{"type":1,"start":102,"end":108}]},{"name":"44b7","type":4,"text":"","markups":[],"layout":4,"metadata":{"id":"1*kOs6DlMR_0vcaSLlmnpVlw.gif","originalWidth":950,"originalHeight":1520}},{"name":"949a","type":1,"text":"The simple trick is that when you finally load a section you calculate the difference between the estimated height and the actual height. If there is a difference you simply shift all the sections below it by that amount.","markups":[]},{"name":"b953","type":1,"text":"If you’re loading sections that are above the scroll point you may also need to update the scroll position. However all of that can be done in the merest fractions of a second, within a single animation frame, so that there is no perceivable difference to the user.","markups":[]},{"name":"45d0","type":3,"text":"2. Justified Layout","markups":[]},{"name":"7484","type":1,"text":"All justified image layouts that I know about use an ingenious, if relatively simple, approach: they accept it is okay to have a grid of varying row heights. All the photos in a single row are scaled to the same height, and every row is the same width, but any two rows may vary in height, and the difference is usually not very noticeable.","markups":[]},{"name":"1cae","type":1,"text":"By giving up a uniform height you can preserve the aspect ratio of every photo while achieving a fixed width grid with uniform spacing. The algorithm to achieve it isn’t even difficult, you select a maximum row height and then one photo at a time you scale the photo to that height, add its width to a running tally, and every time the width exceeds the viewport you scale down each photo in the row until it fits the width (the height will get shorter).","markups":[]},{"name":"d6d2","type":1,"text":"For example laying out 14 photos:","markups":[]},{"name":"1830","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*_IkolRdIGAh3jqoYH6ZiqA.png","originalWidth":1684,"originalHeight":242}},{"name":"a2d3","type":1,"text":"It’s a pretty naive solution but it works well; Google+ used it, Google Search uses a form of it, and Flickr kindly open sourced their implementation of it in 2016 (theirs is slightly smarter and checks if it’s better scaling up with one fewer photo or scaling down with the extra one). The code can be as simple as:","markups":[{"type":3,"start":116,"end":128,"href":"http://code.flickr.net/2016/04/05/our-justified-layout-goes-open-source/","title":"","rel":"","anchorType":0}]},{"name":"7b9b","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"c9b7f5b296d0c2647857acba07cf152d","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F7492189%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"bda0","type":6,"text":"However, because I was initially (if unnecessarily) concerned about having the estimates neatly match the final layout, I went looking for a more sophisticated solution and in the process ended up with a superior one.","markups":[]},{"name":"d99f","type":1,"text":"My theory was that once we’d estimated a layout we should be able to fit the photos to that area. This is essentially a line-wrapping problem, in many ways similar to text layout (wrapping words in text to justify a paragraph). The Knuth & Plass line-breaking algorithm is a well documented dynamic programming approach that I felt could be adapted for photo layout.","markups":[{"type":3,"start":232,"end":245,"href":"https://en.wikipedia.org/wiki/Line_wrap_and_word_wrap","title":"","rel":"","anchorType":0}]},{"name":"c750","type":6,"text":"Instead of making decisions one line at a time, it lays out the entire section as a whole, so that each line may be influenced by the successive ones.","markups":[]},{"name":"018a","type":1,"text":"It does this through a combination of boxes, glue, and penalties. Boxes are the indivisible blocks to be positioned (usually the words, but sometimes characters), glue are the blocks that can be stretched or shrunken (usually the whitespace in the line), and penalties can be applied to discourage certain things (often hyphenation or line breaks).","markups":[{"type":2,"start":38,"end":43},{"type":2,"start":45,"end":49},{"type":2,"start":55,"end":64},{"type":2,"start":66,"end":71},{"type":2,"start":163,"end":167},{"type":2,"start":195,"end":204},{"type":2,"start":208,"end":216},{"type":2,"start":259,"end":268}]},{"name":"d5ca","type":1,"text":"In the following diagram you can see how the glue between the boxes varies in size across the lines.","markups":[{"type":2,"start":45,"end":49},{"type":2,"start":62,"end":67}]},{"name":"a7f8","type":4,"text":"Text layout — boxes and glue","markups":[],"layout":3,"metadata":{"id":"1*bTik3yCnfjzSGEOl3XNSxw.png","originalWidth":1588,"originalHeight":196}},{"name":"27bc","type":1,"text":"There are some differences for a photo layout but they actually make it simpler. For text, there are a lot more variations people will accept — you can alter the spacing between words, you can even alter the spacing between letters in a word, and you can hyphenate mid-word. For photos, people find it distracting when the margins between the photos vary in size, and photo-hyphenation doesn’t even make sense.","markups":[]},{"name":"986c","type":1,"text":"There are some great write ups on how the text algorithm works, but here is how we adapted it to photos.","markups":[{"type":3,"start":21,"end":31,"href":"http://defoe.sourceforge.net/folio/knuth-plass.html","title":"","rel":"","anchorType":0}]},{"name":"730a","type":1,"text":"Photos became the boxes, we could drop the concept of glue entirely, and penalties could be simplified as well. Although now I say that, perhaps it’s more analogous to say we dropped boxes and that photos were the glue (ie the flexible part of our layout are the photos not the whitespace). Maybe we just had sticky boxes?","markups":[{"type":2,"start":18,"end":23},{"type":2,"start":54,"end":58},{"type":2,"start":73,"end":82},{"type":2,"start":183,"end":188},{"type":2,"start":214,"end":219}]},{"name":"682c","type":1,"text":"Instead of altering the spacing between photos, we’d follow the approach of other justified layouts and adjust the row heights. Most of the time there would be multiple places to wrap a row, wrapping earlier would give taller rows (scaling up to fill the width), wrapping later would give shorter rows (scaling down to fit). By considering all the possible permutations of rows, we could find one that best fit the desired area.","markups":[]},{"name":"bcb8","type":1,"text":"That meant we were left with three primary considerations: ideal row height, maximum shrink factor (how much we could scale a row down from ideal), and maximum stretch factor (how much we could scale up).","markups":[{"type":1,"start":69,"end":75},{"type":1,"start":85,"end":91},{"type":1,"start":160,"end":167}]},{"name":"0c25","type":1,"text":"The algorithm works by checking every photo one at a time, looking for permissible row breaks — ie a group of photos that when scaled to fit the width will have a height that falls within the accepted range (maxShrink ≤ height ≤ maxStretch). Every time it finds a permissible break it adds it to the list of possibilities, and looks for permissible breaks from there and so on until it has considered every photo and every possible set of rows.","markups":[]},{"name":"159f","type":1,"text":"For example, with those 14 photos, an acceptable row may have been after 3 or 4 photos, and if we broke at 3 there would be an acceptable break at 6 or 7, although if we broke at 4 there would be acceptable breaks at 7 or 8. These represent multiple completely different, yet all valid, layouts for the grid.","markups":[{"type":2,"start":75,"end":77},{"type":2,"start":149,"end":151},{"type":2,"start":219,"end":221}]},{"name":"2a36","type":4,"text":"Possible photos to wrap (break) on","markups":[],"layout":1,"metadata":{"id":"1*iUZK1_GhGSKV2kkCVKg2-Q.png","originalWidth":1056,"originalHeight":156}},{"name":"0a60","type":1,"text":"The final piece is to calculate a badness score for each row. That is, how non-ideal it is. A row that is the target height has badness score of 0, and the more a row has to shrink or stretch then the higher the badness score will be. The final cost of each row (this will make sense in a moment) is calculated using demerits, which are often the cube or square of the badness plus some penalties (eg for line breaks). There are many articles on how best to calculate badness and demerits, in our case we use a power of the ratio of each row against the max stretch/shrink size (the power more heavily penalizes rows that are a long way from ideal).","markups":[{"type":2,"start":34,"end":41},{"type":2,"start":245,"end":249},{"type":2,"start":317,"end":325}]},{"name":"bf58","type":1,"text":"Having run the algorithm we end up with a graph of nodes, where each node represents a possible photo to break on, and each edge represents a row (there may be multiple edges for any given node, signifying that there may be multiple break points when starting from any photo). For each of these edges we can assign a cost (the demerit value).","markups":[]},{"name":"ea08","type":1,"text":"As an example, for our 14 photos, a target row height (180px), and a given viewport (1120px), it found 19 possible row arrangements (edges), leading to 12 unique grid permutations (or paths through the graph). Displayed below is each unique row, and the possible rows it can connect to. The blue route is the least bad (dare I say best?) one. If you follow the lines you’ll see that each combination constructs a full grid containing every photo — no two rows are the same, and no two grids the same.","markups":[{"type":2,"start":309,"end":318},{"type":2,"start":331,"end":335}]},{"name":"8009","type":4,"text":"Unique row and grid combinations for 14 photos","markups":[],"layout":3,"metadata":{"id":"1*XT4UaQufiMMvLqIFJvq2Sw.jpeg","originalWidth":2400,"originalHeight":2163}},{"name":"0f8e","type":1,"text":"Finding the optimum photo grid (ie the one with the lowest combined set of bad rows) is as simple as calculating the shortest path through the graph.","markups":[]},{"name":"3e8f","type":1,"text":"Luckily for us, the graph we produce is what’s known as a Directed Acyclic Graph (DAG), which is one where there are no loops and you can only go one way (ie you can’t repeat nodes/photos). This means that calculating the shortest path can be done in linear time (which is computer speak for quickly). Better still, we can actually calculate the shortest path while we are producing the graph.","markups":[{"type":3,"start":58,"end":80,"href":"https://en.wikipedia.org/wiki/Directed_acyclic_graph","title":"","rel":"","anchorType":0},{"type":2,"start":292,"end":299}]},{"name":"5e9d","type":1,"text":"To calculate the length of the path we simply add up the cost we assigned to each row, and every time we find a new edge that connects to a node, check if this makes a shorter path for that node back to the start — if so remember it.","markups":[{"type":2,"start":17,"end":23}]},{"name":"9bb2","type":1,"text":"Here is an illustration of what the computer “sees” as it looks through those 14 photos — the top line shows what photos it is currently looking at (the starting and ending photo for a row), the graph below shows what break points it has discovered, and which edges connect, and at every point it will highlight in pink the currently shortest path for each node. This is actually just another representation of the picture graph shown above — each of the edges between the boxes corresponds to one of those unique rows.","markups":[]},{"name":"9af4","type":1,"text":"Starting from the first photo it finds an acceptable break point at index 2, with a cost of 114. It then finds another acceptable break point at index 3 with a much higher cost of 9483. It now needs to check those two new indexes (2 and 3) for where they could break. From 2 it finds 5 and 6, and at this point the shortest path for 6 is back via 2 (114 + 1442 = 1556) so it marks it. When photo 3 finds a path to 6 we check the cost again, but because it was so expensive to get to 3 initially, the total cost (9483 + 1007 = 10490) means that 6 keeps its allegiance to 2. Towards the end of the animation you can see that the first path to 11 was non-ideal and switches when node 8 is considered.","markups":[]},{"name":"c153","type":4,"text":"Finding the optimum row combination for 14 photos","markups":[],"layout":1,"metadata":{"id":"1*lcldpRyTUaQmKXuVMYZU-Q.gif","originalWidth":1500,"originalHeight":1500}},{"name":"f9ce","type":1,"text":"We keep doing this through the entire set of photos until we get to the very last photo (index 13). At that point the shortest path (and best layout) can be found by following the shortest route we marked along the way (and colored in blue in the animation).","markups":[]},{"name":"b61b","type":1,"text":"Here is a comparison of what the naive algorithm produced (on the left), and the one that the line-wrap algorithm achieved (on the right). For both they were given a target height of 180px. You can see two interesting things, one is that the naive layout always goes under, and the other is that the line-wrap one was just as happy to go over – however the line-wrap algorithm produced a grid that was much closer to the target height.","markups":[]},{"name":"9783","type":4,"text":"Comparison between layout approaches, given a target height of 180px","markups":[],"layout":3,"metadata":{"id":"1*Wq_n1gOkjsWE9DS8_o1Tog.png","originalWidth":1828,"originalHeight":688}},{"name":"1c0b","type":1,"text":"We found in our testing that the line-wrap (we named it FlexLayout) algorithm produced both objectively and subjectively more desirable grids. It consistently produced grids of more uniform height (smaller variation between rows), and ones with average row heights much closer to the requested target. And it did appreciably better with panoramas and other edge cases that usually trip up a naive algorithm — this is because in the naive approach the panoramic (ultra-wide) photo will be added to the first row it’s considered, and so often scaled very small because there may be multiple photos on that row already, whereas with the FlexLayout all possible rows are considered, and ones that overly shrink the panorama will have high badness values, encouraging the selection of grids where the panorama is placed by itself or with few others.","markups":[{"type":2,"start":56,"end":66}]},{"name":"3173","type":6,"text":"That may mean that there are a few rows that will be a little more bad (a few more pixels from target height), to prevent one row being much more bad (extremely short or extremely tall). It minimizes surprises.","markups":[]},{"name":"fa77","type":1,"text":"There are many factors that affect how many possible layouts there are. More photos is one of the largest factors, but the viewport width can also constrain it, and then the actual parameters for shrink-ability/stretch-ability have a big effect too.","markups":[]},{"name":"e9d4","type":4,"text":"Unique layouts for 25 photos across viewport sizes","markups":[],"layout":4,"metadata":{"id":"1*MURVPPuBBTxSaeD_T4hnww.png","originalWidth":2264,"originalHeight":1792}},{"name":"c668","type":1,"text":"You can get a sense of this when looking at the graph for 25 photos across a narrow, medium, and wide viewport. In the narrow window there were only a few breakpoints available but we needed a lot of rows, in the medium window there were more breakpoints, and in the wide window while there were even more breakpoints we did not need as many rows so there were actually fewer total arrangements.","markups":[]},{"name":"d208","type":1,"text":"The total number of unique layouts grows exponentially with the number of photos. For a medium width viewport I had the layout calculate the actual unique paths for a set of photos and got:","markups":[]},{"name":"3cf4","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"f0ce959f8725a0258634c3b87aeb18e3","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F7492189%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"77f0","type":1,"text":"For 1000 photos there were simply too many for the computer to measure, so it couldn’t actually count the precise number of unique paths (it’s an amusing quirk that the algorithm in this case can know it has found the best path nearly instantly, even if it can’t verify itself in reasonable time).","markups":[]},{"name":"841e","type":1,"text":"We can estimate the unique layout permutations by taking the average number of permissible breakpoints per row and raising that to the power of the likely number of rows. Most viewports support 2–3 breakpoints per row, and with most rows about 5 or more photos, you can ballpark the number of layouts with 2.5^(count/5).","markups":[]},{"name":"f318","type":1,"text":"For 1000 photos that would be a number with 79 zeros on the end. 1260 photos would have a googol of layouts.","markups":[{"type":3,"start":90,"end":96,"href":"https://en.wikipedia.org/wiki/Googol","title":"","rel":"","anchorType":0}]},{"name":"6bfe","type":6,"text":"While the naive approach will consider a single layout and pick it every time, the line-wrap algorithm considers millions, billions, trillions, and many more unique layouts and selects the best one.","markups":[{"type":1,"start":41,"end":47},{"type":1,"start":189,"end":193}]},{"name":"af16","type":1,"text":"In case you’re curious, it’s also very quick. The layout for 100 photos takes about 2 thousandths of a second (2ms). 1000 photos takes 10ms, 10000 photos takes 50ms, and 1 million photos only takes 1.5 full seconds (we’ve tested). In comparison the naive algorithm takes about 2ms, 3ms, 30ms, and 400ms for those same numbers — faster, but not to a meaningful degree.","markups":[]},{"name":"4931","type":1,"text":"So, while the original intent had been to use the sheer number of possible layouts available to pick the one that best fit the available space (ie make the layout match the estimate), because we found that we can smoothly adjust the gap between estimated and actual size, it allows us to always present users with the best possible grid.","markups":[]},{"name":"6fdb","type":6,"text":"The layout works so well the team has since ported it to Android and iOS, and the three implementations are kept in sync.","markups":[]},{"name":"3b33","type":1,"text":"The last layout trick we do is run the algorithm twice for each section. The first time we run it to lay out all the photos within segment, the second time we run it to lay out all the segments within the section. The primary reason for this is sometimes there are very short segments that do not fill a row, and the layout algorithm will suggest options to coalesce them — and same as with photos, it will look at all the possible groupings to select the most ideal.","markups":[{"type":2,"start":64,"end":71},{"type":2,"start":131,"end":138},{"type":2,"start":185,"end":193},{"type":2,"start":205,"end":212}]},{"name":"8e5b","type":4,"text":"Coalesced segments","markups":[],"layout":3,"metadata":{"id":"1*s9J3Wpv-OWWNOKoNy3msDQ.png","originalWidth":2699,"originalHeight":914}},{"name":"247b","type":3,"text":"3. 60fps Scrolling","markups":[]},{"name":"5c5f","type":1,"text":"Having scrubbable photos and ideal layouts would not count for much if the browser couldn’t handle it. Which, by itself, it actually can’t — fortunately we can help.","markups":[]},{"name":"d64b","type":1,"text":"One of the biggest ways that websites can feel slow (other than initial load times) is in how smoothly they respond to user interaction, especially scrolling. Browsers try to redraw the contents of the screen 60 times every second (60fps) and when they’re successful it looks and feels very smooth — when they don’t it can feel janky.","markups":[]},{"name":"1d41","type":1,"text":"To maintain 60fps each update needs to be rendered in a mere 16ms (1/60) and the browser needs some of that time for itself — it has to marshal the events, parse style information, calculate layouts, convert all the elements into pixels, and finally draw them to the screen — that leaves around 10ms for an app to do its own work.","markups":[{"type":1,"start":295,"end":299}]},{"name":"e764","type":6,"text":"Within those 10ms, applications need to be both efficient in what they do, as well as careful not to make the browser perform unnecessary work.","markups":[]},{"name":"962f","type":13,"text":"Maintaining a constant-size DOM","markups":[]},{"name":"0855","type":1,"text":"One of the worst things for page performance is having too many elements. The problem is two fold: it consumes more memory for the browser (eg at 50KB thumbnails 1000 photos is 50megabytes, the 10000 photos that used to crash Chrome was half a gigabyte); additionally, it is more individual pieces the browser needs to compute the styles and positions for, and composite during layout.","markups":[]},{"name":"a0d4","type":4,"text":"We remove all unnecessary elements","markups":[],"layout":4,"metadata":{"id":"1*PdGX1EBnfRHn-R2B88lVSA.png","originalWidth":950,"originalHeight":1562}},{"name":"d396","type":1,"text":"While most users will have thousands of photos in their library the screen can usually only fit a few dozen.","markups":[]},{"name":"e7ab","type":1,"text":"So, instead of placing every photo into the page and keeping it there, every time the user scrolls we calculate what photos should be visible and make sure they are in the document.","markups":[]},{"name":"6814","type":1,"text":"For any photo that used to be in the document but is no longer visible we pull it back out.","markups":[]},{"name":"be16","type":1,"text":"While scrolling the page there are probably never more than 50 photos present, even as you scroll through tens of thousands. This keeps the page snappy at all times and prevents crashing the tab.","markups":[]},{"name":"a2b4","type":1,"text":"And, because we group photos into segments and sections we can often take a shortcut and detach entire groups instead of each individual photo.","markups":[]},{"name":"d713","type":13,"text":"Minimizing changes","markups":[]},{"name":"be73","type":1,"text":"There are some great articles on the Google Developers site about rendering performance and how to use the powerful analysis tools that are built into Google Chrome — I’ll touch on a few aspects here as it applies to photos, but the other write-ups are well worth a read. The first thing to understand is the page rendering life-cycle:","markups":[{"type":3,"start":66,"end":87,"href":"https://developers.google.com/web/fundamentals/performance/rendering/","title":"","rel":"","anchorType":0},{"type":3,"start":116,"end":130,"href":"https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference","title":"","rel":"","anchorType":0}]},{"name":"17f3","type":4,"text":"The (Chrome) pixel pipeline","markups":[],"layout":1,"metadata":{"id":"1*3EjkvVtB2sCw6MtkqOYDyQ.jpeg","originalWidth":1093,"originalHeight":167}},{"name":"262d","type":1,"text":"Every time there is a change to the page (usually triggered by JavaScript, but sometimes CSS styles or animations) then the browser checks what styles apply to the affected elements, recalculates their layouts (the size and positions), and then paints all the elements (ie converts text, images, etc… to pixels). For efficiency the browser usually breaks the page into different sections it calls layers and paints these separately, and so a final step of compositing (arranging) those layers is performed.","markups":[{"type":1,"start":144,"end":150},{"type":1,"start":202,"end":209},{"type":1,"start":245,"end":251},{"type":1,"start":456,"end":467},{"type":2,"start":397,"end":403}]},{"name":"fb1f","type":1,"text":"Most of the time you never need to think about this, the browser is pretty clever, but if you keep changing the page on it (for example constantly adding or removing photos) then you need to be efficient in how you do that.","markups":[]},{"name":"b50a","type":4,"text":"Sections, segments, and tiles are positioning absolutely","markups":[],"layout":4,"metadata":{"id":"1*WiCld-CLxf3QQ0umLUsblw.png","originalWidth":914,"originalHeight":674}},{"name":"2eaf","type":1,"text":"One way we minimize updates is by positioning everything relative to its parent. Sections are positioned absolutely relative to the grid, segments are positioned absolutely relative to their section, and tiles (the photos) are positioned absolutely relative to the segment.","markups":[{"type":3,"start":105,"end":115,"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/position","title":"","rel":"","anchorType":0},{"type":2,"start":81,"end":89},{"type":2,"start":132,"end":136},{"type":2,"start":138,"end":146},{"type":2,"start":191,"end":198},{"type":2,"start":204,"end":209},{"type":2,"start":265,"end":272}]},{"name":"ea20","type":1,"text":"What this means is that when we need to move a section because the estimated and actual layout heights were different, instead of needing to make hundreds (or thousands) of changes to every photo that was below it, we need only update the top position of the following sections. This structure helps isolate each part of the grid from unnecessary updates.","markups":[]},{"name":"8973","type":1,"text":"Modern CSS even provides a way to let the browser know — the contain keyword lets you indicate to what degree an element can be considered independently of the DOM. We annotate the sections and segments accordingly.","markups":[{"type":3,"start":61,"end":68,"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/contain","title":"","rel":"","anchorType":0},{"type":2,"start":61,"end":69},{"type":2,"start":181,"end":189},{"type":2,"start":194,"end":202}]},{"name":"f8c5","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"bcb679673dc656d767a7dfff74852c1a","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F7492189%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"241a","type":1,"text":"There are some easy performance pitfalls as well, for example the scroll event can fire multiple times within a single frame, and the same for resize. There is no need to force the browser to recalculate style and layout for the first events if you will change them a second time anyway.","markups":[]},{"name":"900b","type":1,"text":"Fortunately there is a handy way to avoid that. You can ask the browser to execute a specific function before the next repaint by using window.requestAnimationFrame(callback). In the scroll and resize handlers we use this to schedule a single callback instead of immediately updating — for resize we go a step further and delay updating for half a second until the user has settled on the final window size.","markups":[{"type":3,"start":136,"end":174,"href":"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame","title":"","rel":"","anchorType":0},{"type":2,"start":136,"end":174}]},{"name":"3b45","type":1,"text":"The second common pitfall is something known as layout thrashing. Once the browser has calculated layout, it caches it, and so you can happily request the width, height, or position of any element pretty quickly. However if you make any changes to properties that could affect layout (eg width, height, top, left) you immediately invalidate that cache, and if you try to read one of those properties again the browser will be forced to recalculate the layout (perhaps multiple times in the same frame).","markups":[{"type":3,"start":48,"end":64,"href":"https://developers.google.com/web/fundamentals/performance/rendering/avoid-large-complex-layouts-and-layout-thrashing","title":"","rel":"","anchorType":0},{"type":2,"start":98,"end":104}]},{"name":"7bf5","type":1,"text":"Where this can really cause problems is in loops with updates to many elements (eg hundreds of photos), if each loop you read one of the layout properties, then change them (say moving photos or sections to the correct spots), then you are triggering a new layout calculation for every step in the loop.","markups":[]},{"name":"e3d7","type":1,"text":"The simple way to avoid this is to first read all the values you need, and then write all the values (ie batch and separate reads from writes). For our case we avoid ever reading the values, and instead keep track of the size and position that every photo should be in, and absolutely position them all. On scroll or resize we can re-run all our calculations based on the positions we have been tracking, and safely update knowing that we will never thrash. Here is what a typical scroll frame looks like (everything is only called once):","markups":[]},{"name":"c1e6","type":4,"text":"Rendering and Painting event order for a typical scroll update","markups":[],"layout":1,"metadata":{"id":"1*2xlmuQGaE6S5z5-Dql9hFQ.png","originalWidth":1002,"originalHeight":349}},{"name":"9eda","type":13,"text":"Avoiding long running code","markups":[]},{"name":"b512","type":1,"text":"With the exception of Web Workers, and some of the native async handlers like the Fetch API, everything in a tab essentially runs on the same thread — both rendering and JavaScript. That means any code a developer runs will prevent the page from redrawing until it completes — for example a long-running scroll event handler.","markups":[]},{"name":"609f","type":1,"text":"The two most time-consuming things our grid does is layout and element creation. For both we try to limit them to the essential operations.","markups":[]},{"name":"647e","type":1,"text":"For example, the layout algorithm takes 10ms for 1000 photos and 50ms for 10000 — this could use up our entire frame allowance. However given we subdivide our grid into sections and segments we usually only need to layout a few hundred photos at any time (which takes 2–3ms).","markups":[]},{"name":"9d94","type":1,"text":"The most “costly” layout event should be a browser resize, because that would need us to re-calculate the sizes of every section. Instead we fall back to the simple estimate calculation, even for loaded sections, and only perform the full FlexLayout for the presently visible section. We can then defer the complete layout calculation for the other sections until we scroll back to them.","markups":[{"type":2,"start":239,"end":249}]},{"name":"6993","type":1,"text":"The same happens with element creation—we only create the photo tiles just before we need them.","markups":[]},{"name":"a511","type":13,"text":"Result","markups":[]},{"name":"92a2","type":1,"text":"The end result of all the hard work is a grid that can maintain 60fps the majority of the time, even if it occasionally drops some frames.","markups":[]},{"name":"9029","type":1,"text":"These dropped frames usually occur when a major layout event happens (such as inserting a brand new section) or occasionally when the browser performs garbage-collection on very old elements.","markups":[{"type":2,"start":48,"end":54}]},{"name":"5145","type":4,"text":"Framerate during scroll","markups":[],"layout":1,"metadata":{"id":"1*2T23eXGToqZHnNq0oWuKzg.gif","originalWidth":368,"originalHeight":360}},{"name":"5bc3","type":3,"text":"4. Instantaneous Feel","markups":[]},{"name":"89d5","type":1,"text":"I suspect that most front-end engineers would agree that sleight of hand plays a role in many good UIs. The trick is selecting what smoke to use and how to angle the mirrors.","markups":[]},{"name":"1fc4","type":1,"text":"My favorite example of this is a secret that a colleague at YouTube shared with me. When they first implemented the navigation progress bar (the red bar that appears at the very top when you change pages) they had no way of actually measuring the progress, so they just animated it at the speed most pages took, and then it sort of “hangs” towards the end until the page actually does load. I have no idea if the current version is still pretending or if it actually works, but the point is it doesn’t matter.","markups":[]},{"name":"669f","type":4,"text":"YouTube progress bar","markups":[],"layout":1,"metadata":{"id":"1*904ZgUtT2yGbhIkw-_ii5g.png","originalWidth":1975,"originalHeight":255}},{"name":"68a2","type":6,"text":"It wasn’t necessary to be accurate, what mattered was it helped the page feel responsive.","markups":[]},{"name":"b1e5","type":1,"text":"In this section I’ll share a few of the tricks we use to make Google Photos appear a little faster than it really is — mostly how we disguise image load times.","markups":[]},{"name":"b7df","type":1,"text":"The first, and probably most effective, thing we do is preemptively load content that we think you are about to look at.","markups":[]},{"name":"df7f","type":4,"text":"","markups":[],"layout":4,"metadata":{"id":"1*ceKYM6jO6G_DGK6VqNHXRA.png","originalWidth":818,"originalHeight":1702}},{"name":"42b5","type":1,"text":"After loading any tile that is visible we then attempt to stay a page ahead so the thumbnails have loaded by the time you scroll.","markups":[]},{"name":"669c","type":1,"text":"However, especially for HDPI screens (where we need to load larger thumbnails), if you are scrolling quickly then the network connection may not be able to fulfill all those requests in time.","markups":[]},{"name":"b2a4","type":1,"text":"We handle that by loading extremely small placeholders for as many as 4 or 5 full screens in the future, and replacing them once they get closer to the viewport.","markups":[]},{"name":"1a8d","type":1,"text":"This means that if you are scrolling relatively slowly (at a speed suitable for actually looking at all photos) then you should never see any loading, and if you are scrubbing quickly (at a speed suggesting you are searching for a photo) we can give you enough of the visual context to help guide your search.","markups":[]},{"name":"3894","type":1,"text":"This is a complex tradeoff between doing unnecessary work over-fetching content, and providing a better experience.","markups":[]},{"name":"da40","type":1,"text":"We take a few factors into consideration. The first thing is to observe the scroll direction, and only pre-load content in the direction the user is heading. We also measure the scroll speed and skip loading full-res thumbnails as soon as we think you’re scrubbing, and at an even higher threshold disable low-res preloading if you’re flying through content.","markups":[]},{"name":"752f","type":1,"text":"In each case (normal thumbnail and low-res) we’re scaling images. Now that modern screens have such high resolutions the common practice to ensure images look crisp is to load an image that is twice as large as the space you are filling and then shrink it (so there are more actual pixels than the space it takes). For the low-res placeholders we request very small images, and also at lower compression quality (eg 25%) and then scale them up.","markups":[]},{"name":"7ab6","type":1,"text":"Here is an example of a sleepy leopard — the image on the left is used in the grid when the tile is fully loaded (it gets scaled down to half size), the image on the right is the low-res placeholder you will only see if you are scrolling quickly (it gets scaled up).","markups":[]},{"name":"2f5f","type":4,"text":"Normal and low-res placeholder tiles","markups":[],"layout":3,"metadata":{"id":"1*tLGUCQcdi0qhUp0wIBsl6A.png","originalWidth":2720,"originalHeight":848}},{"name":"e348","type":1,"text":"Also observe the byte sizes. The HDPI thumbnail was 71.2KB (gzipped) while the low-res placeholder was only 889B (gzipped) — the thumbnail was 80x bigger! Put another way, a single tile in the grid is the same as 4 or more pages of low-res placeholders.","markups":[]},{"name":"bee0","type":6,"text":"For a very small increase in extra network traffic we can give the user a much better experience, a grid that always feels full, and always provides visual context.","markups":[]},{"name":"5d1d","type":1,"text":"The last little touch with the low-res tiles was how we asked the browser to render them. By default when you scale up an image the browser will smooth it a little (the center image below), but this doesn’t look very good. You can apply a blur filter (the right-most image) which makes it look more deliberate, but the downside is that filter is computationally expensive, and if you apply it to hundreds of elements you will negatively affect rendering and scroll performance. So we chose to go in the other direction and lean-in to our low-res look by asking the browser to leave the image pixelated (the left-most image) — to be honest, I’m not sure if this is still in the product today, there have been a few refactorings.","markups":[]},{"name":"6118","type":4,"text":"Low-res thumbnail rendering options","markups":[],"layout":3,"metadata":{"id":"1*A7T9gO4w93CzqW0sIhxAfA.png","originalWidth":1768,"originalHeight":460}},{"name":"5626","type":1,"text":"While the hope is the user never sees the low-res images (except during fast scrolling) when replacing them after they are in the viewport we previously used a quick animation to make it look like they loaded (instead of flashing into place). That’s easily achieved by overlaying the two pictures and animating the opacity (from fully transparent to fully opaque) — this cross-fade technique has become very common across the web, for example all the images in this Medium post probably did it. I believe the cross-fade for low/high-res has since been turned off, but it does still occur from the empty (grey) tile to the image.","markups":[]},{"name":"d55c","type":1,"text":"It makes it look like the image is loading. We did this swiftly (in 100ms) which is just enough time to take the edge off, without feeling indulgent. I’ve slowed the animation below to make it more observable.","markups":[]},{"name":"d580","type":4,"text":"Loading transition at slower speed","markups":[],"layout":1,"metadata":{"id":"1*qruGq8HASadcOUiVoCUutQ.gif","originalWidth":532,"originalHeight":354}},{"name":"69e4","type":1,"text":"We use this technique a second time when transitioning from a thumbnail photo into the full-screen view. When the user clicks a tile we immediately start loading the full-res image and in the meantime scale and animate the thumbnail into place, when the full image has loaded we overlay and do the opacity animation between them. The only difference is this time, because we are only applying it to a single element, we can afford to use the more expensive blur filter (which is handy because the pixelated effect is less charming on large images).","markups":[{"type":2,"start":457,"end":461}]},{"name":"37b5","type":4,"text":"Transition from photo grid to full-screen","markups":[],"layout":1,"metadata":{"id":"1*79Ncm3sWkgYOrNTn7k7mCg.gif","originalWidth":650,"originalHeight":400}},{"name":"9e33","type":1,"text":"At all times, when scrolling through photos, or transitioning to the full-screen view, we are trying to provide a smooth experience to the user that always feels it is responding to their input, even when the content isn’t ready. Contrast this with how it would feel if when you clicked a tile, it either displayed a blank screen or alternatively did nothing until the full photo loaded.","markups":[]},{"name":"e5fd","type":1,"text":"We even apply this concept to the empty sections. If you recall, our scrubbable grid only loads sections when it needs to (although like tiles it attempts to pre-load nearby sections). This means, especially if you grab the scrollbar and race ahead, you can get to sections that have not loaded yet — the grid has pre-allocated space for them, but doesn’t know what photos go there or what the layout is.","markups":[]},{"name":"5820","type":1,"text":"To make scrolling feel more natural we put a texture in the unloaded sections that is the same height as the target row size and colored to look like an empty tile. When we first launched, it just looked like rows (the left-most picture), although the team has more recently changed the texture to be rows and columns (the right-most picture) which more closely approximates photos. The middle picture is what it looks like when the section has loaded but the tiles have not.","markups":[]},{"name":"fc46","type":4,"text":"Grid patterns during loading states","markups":[],"layout":3,"metadata":{"id":"1*ufLlTgBCYdPO0hNF9_lYFg.png","originalWidth":3020,"originalHeight":684}},{"name":"6fde","type":6,"text":"It’s like animal tracks for photo loading states — next time you’re scrubbing through Google Photos see if you can spot the differences.","markups":[]},{"name":"c7bb","type":1,"text":"Instead of using an image for the texture, it was actually created using CSS. This gives the added bonus that the width and height can be dynamically generated to match the target row height that is used for the grid.","markups":[]},{"name":"d9db","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"6bac9a89ae29353c6872eef6e7dbedaa","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F7492189%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"6f9f","type":1,"text":"We have a few other tricks but they’re mostly about prioritizing network requests. For example, instead of flooding the network with a request for 100 photo thumbnails, we batch them into 10 or so at a time, so if the user suddenly starts scrolling again we don’t end up with 90 photos we loaded but didn’t use. Similarly, we always prioritize loading the visible thumbnails over the off-screen ones.","markups":[]},{"name":"0ea3","type":1,"text":"We even look to see if we have already loaded a similarly sized thumbnail and can use it instead — this last use-case is primarily after browser resizes, often you will end up with a grid layout that is almost the same but rows just a few pixels different. Instead of having to re-download every photo again we will slightly scale the images we already have (opting for new ones only if the difference is too much).","markups":[]},{"name":"ca43","type":3,"text":"Conclusion","markups":[]},{"name":"f559","type":1,"text":"A tremendous amount of care and attention goes into every detail of the Google Photos experience, and the photo grid is just one part of a much bigger product.","markups":[]},{"name":"80d5","type":6,"text":"While it may at first appear simple, and even stationary, the grid is nearly always thinking — loading, pre-fetching, animating, creating, removing, and presenting your content the best that it can.","markups":[]},{"name":"74bf","type":1,"text":"Keeping the grid performing well (and constantly improving) has been an ongoing priority for the team. They have comprehensive monitoring to measure the scrolling frame-rate, the section and image load times, and many other metrics, and continue to improve the performance and experience each year.","markups":[]},{"name":"8cfd","type":1,"text":"Here is a short screen capture of what it looks like to scroll through a gallery. At slow speeds you only see the full-res images, as we speed up you can start to see the pixelated placeholders which resolve as soon as we slow down again, and as we race forwards there is a brief glance at empty grey tiles until the grid catches up.","markups":[]},{"name":"447f","type":11,"text":"Scrolling and scrubbing the photo grid","markups":[],"layout":3,"iframe":{"mediaResourceId":"af473bf8a25bf92f1c0d8efc850c2d8f","iframeWidth":854,"iframeHeight":480,"thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fi.ytimg.com%2Fvi%2Fd57mzcSrSQw%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"81df","type":1,"text":"A big thank you to my former manager on Photos Vincent Mo, who in addition to his support, shot all the great photos used throughout this post (and which served as a test set during development). Also to Jeremy Selier, the Photos Web Lead, and his team, who continue to maintain and improve the Photos Web UI today.","markups":[{"type":3,"start":47,"end":57,"anchorType":2,"userId":"86f947617ace"},{"type":3,"start":204,"end":217,"anchorType":2,"userId":"6ee65fb2910f"},{"type":2,"start":0,"end":315}]}],"sections":[{"name":"7f33","startIndex":0},{"name":"5f4e","startIndex":16},{"name":"16be","startIndex":38},{"name":"ae2c","startIndex":88},{"name":"f7e2","startIndex":127},{"name":"83bd","startIndex":162}]},"postDisplay":{"coverless":true},"metaDescription":"A tremendous amount of care and attention goes into every detail of the Google Photos experience, the photo grid is just one part of a much bigger product. Here is how we made it."},"virtuals":{"statusForCollection":"APPROVED","allowNotes":true,"previewImage":{"imageId":"1*GfYo2WZaEjsfGjKKCmkXdw.png","filter":"","backgroundSize":"","originalWidth":2000,"originalHeight":670,"strategy":"resample","height":0,"width":0},"wordCount":6620,"imageCount":23,"readingTime":26.881132075471697,"subtitle":"A peek under the hood","publishedInCount":1,"usersBySocialRecommends":[],"noIndex":false,"recommends":1073,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"web-development","name":"Web Development","postCount":76958,"virtuals":{"isFollowing":false},"metadata":{"followerCount":45081,"postCount":76958,"coverImage":{"id":"1*K6M-x-6e39jMq_c-2xqZIQ.png","originalWidth":665,"originalHeight":421}},"type":"Tag"},{"slug":"google-photos","name":"Google Photos","postCount":190,"virtuals":{"isFollowing":false},"metadata":{"followerCount":8,"postCount":190,"coverImage":{"id":"1*GfYo2WZaEjsfGjKKCmkXdw.png","originalWidth":2000,"originalHeight":670}},"type":"Tag"},{"slug":"photography","name":"Photography","postCount":90414,"virtuals":{"isFollowing":false},"metadata":{"followerCount":1183052,"postCount":90414,"coverImage":{"id":"1*J7gtLEJuiztqqWDMGt2AYw.jpeg"}},"type":"Tag"},{"slug":"grid-layout","name":"Grid Layout","postCount":107,"virtuals":{"isFollowing":false},"metadata":{"followerCount":6,"postCount":107,"coverImage":{"id":"1*GfYo2WZaEjsfGjKKCmkXdw.png","originalWidth":2000,"originalHeight":670}},"type":"Tag"},{"slug":"web-performance","name":"Web Performance","postCount":566,"virtuals":{"isFollowing":false},"metadata":{"followerCount":311,"postCount":566,"coverImage":{"id":"1*GfYo2WZaEjsfGjKKCmkXdw.png","originalWidth":2000,"originalHeight":670}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":17,"links":{"entries":[{"url":"https://en.wikipedia.org/wiki/Line_wrap_and_word_wrap","alts":[],"httpStatus":200},{"url":"https://en.wikipedia.org/wiki/Googol","alts":[],"httpStatus":200},{"url":"https://en.wikipedia.org/wiki/Directed_acyclic_graph","alts":[],"httpStatus":200},{"url":"https://googleblog.blogspot.com/2015/05/picture-this-fresh-approach-to-photos.html","alts":[],"httpStatus":200},{"url":"https://photos.google.com/","alts":[],"httpStatus":200},{"url":"http://code.flickr.net/2016/04/05/our-justified-layout-goes-open-source/","alts":[{"type":1,"url":"https://cdn.ampproject.org/c/code.flickr.net/2016/04/05/our-justified-layout-goes-open-source/amp/"}],"httpStatus":200},{"url":"http://defoe.sourceforge.net/folio/knuth-plass.html","alts":[],"httpStatus":200},{"url":"https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference","alts":[],"httpStatus":200},{"url":"https://developer.mozilla.org/en-US/docs/Web/CSS/position","alts":[],"httpStatus":200},{"url":"https://developers.google.com/web/fundamentals/performance/rendering/avoid-large-complex-layouts-and-layout-thrashing","alts":[],"httpStatus":200},{"url":"https://developer.mozilla.org/en-US/docs/Web/CSS/contain","alts":[],"httpStatus":200},{"url":"https://developers.google.com/web/fundamentals/performance/rendering/","alts":[],"httpStatus":200},{"url":"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame","alts":[],"httpStatus":200}],"version":"0.3","generatedAt":1531266155715},"isLockedPreviewOnly":false,"takeoverId":"","metaDescription":"A tremendous amount of care and attention goes into every detail of the Google Photos experience, the photo grid is just one part of a much bigger product. Here is how we made it.","totalClapCount":9565,"sectionCount":6,"readingList":0,"topics":[{"topicId":"22d054b693da","slug":"digital-design","createdAt":1490119315338,"deletedAt":0,"image":{"id":"1*Su6vAh8QOnSkcOrlJAyLmw@2x.jpeg","originalWidth":5184,"originalHeight":3456},"name":"Digital design","description":"More than just a pretty typeface.","briefCatalogId":"51020d7ae800","relatedTopics":[],"visibility":1,"relatedTags":[],"type":"Topic"},{"topicId":"55f1c20aba7a","slug":"software-engineering","createdAt":1491949272237,"deletedAt":0,"image":{"id":"1*U8FboK4lz1wqwQC6IcqxKw@2x.jpeg","originalWidth":5507,"originalHeight":3098},"name":"Software engineering","description":"Back-end to front-end.","briefCatalogId":"baec7bf32d9b","relatedTopics":[],"visibility":1,"relatedTags":[],"type":"Topic"},{"topicId":"76d56a8194b9","slug":"photography","createdAt":1490119237251,"deletedAt":0,"image":{"id":"1*7M77328YUU-_nDacEgPP_A@2x.jpeg","originalWidth":600,"originalHeight":399},"name":"Photography","description":"Picture this.","briefCatalogId":"e2a405b58703","relatedTopics":[],"visibility":1,"relatedTags":[],"type":"Topic"},{"topicId":"9d34e48ecf94","slug":"popular","createdAt":1489531225814,"deletedAt":0,"image":{"id":"1*zHQfWAA7XvniG-ECKZhSnA@2x.jpeg","originalWidth":5616,"originalHeight":3744},"name":"Popular on Medium","description":"What’s trending on Medium right now.","briefCatalogId":"204bf8ecf554","relatedTopics":[],"visibility":2,"relatedTags":[],"type":"Topic"}]},"coverless":true,"slug":"building-the-google-photos-web-ui","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":false,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"google-photos-45b714dfbed1","previewContent":{"bodyModel":{"paragraphs":[{"name":"d213","type":4,"text":"","markups":[],"layout":9,"metadata":{"id":"1*GfYo2WZaEjsfGjKKCmkXdw.png","originalWidth":2000,"originalHeight":670}},{"name":"7403","type":3,"text":"Building the Google Photos Web UI","markups":[],"alignment":1},{"name":"b15a","type":13,"text":"A peek under the hood","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/google-design/google-photos-45b714dfbed1","approvedHomeCollectionId":"2935d33b43a8","approvedHomeCollection":{"id":"2935d33b43a8","name":"Google Design","slug":"google-design","tags":["GOOGLE","MATERIAL DESIGN","UX DESIGN"],"creatorId":"6edd8fab00b6","description":"Google Design is a cooperative effort led by a group of designers, writers, and developers at Google to support and further design and technology. Our Medium collection features highlights from design.google, and original content written by designers and engineers at Google.","shortDescription":"Google Design is a cooperative effort led by a group of…","image":{"imageId":"1*RGUDs-7Iegr7UOmlu4lmpg.png","filter":"","backgroundSize":"","originalWidth":60,"originalHeight":60,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":112799,"activeAt":1531241796543},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*DAhCtCQXf8jbjJEXPTsLYw.png","filter":"","backgroundSize":"","originalWidth":352,"originalHeight":73,"strategy":"resample","height":0,"width":0},"twitterUsername":"googledesign","publicEmail":"design@google.com","collectionMastheadId":"be4d1050b17a","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Google Design","description":"Supporting the future of design and technology","backgroundImage":{},"logoImage":{"id":"1*-v207691raOmUc6vTWHx5g@2x.png","originalWidth":280,"originalHeight":280,"alt":"Google Design"},"alignment":1,"layout":6}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":1,"postIds":["45b714dfbed1"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["60499be68b25","85a010840f7b","c41f4018bc5"]}},{"type":1,"postListMetadata":{"source":2,"layout":4,"number":3,"postIds":[],"sectionHeader":"Top stories by designers at Google"}},{"type":1,"postListMetadata":{"source":1,"layout":6,"number":25,"postIds":[],"sectionHeader":"Latest"}}],"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF02B875","point":0},{"color":"#FF00AB6B","point":0.1},{"color":"#FF1C9963","point":0.2},{"color":"#FF092E20","point":1}],"backgroundColor":"#FFFFFFFF"},"highlightSpectrum":{"colorPoints":[{"color":"#FFFFFFFF","point":0},{"color":"#FFE9FDF0","point":0.1},{"color":"#FFE2FAEE","point":0.2},{"color":"#FFADFFCF","point":0.6},{"color":"#FF7DFFB3","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":1,"title":"Google","tagSlug":"google","url":"https://medium.com/google-design/tagged/google","source":"tagSlug"},{"type":1,"title":"How-Tos","tagSlug":"how-to","url":"https://medium.com/google-design/tagged/how-to","source":"tagSlug"},{"type":1,"title":"Career Advice","tagSlug":"career-advice","url":"https://medium.com/google-design/tagged/career-advice","source":"tagSlug"},{"type":1,"title":"Material","tagSlug":"material-design","url":"https://medium.com/google-design/tagged/material-design","source":"tagSlug"},{"type":5,"title":"Archive","url":"https://medium.com/google-design/archive"},{"type":3,"title":"Sign up for our newsletter","url":"https://services.google.com/fb/forms/google-design-updates/"}],"colorBehavior":1,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Google Design","description":"Supporting the future of design and technology","backgroundImage":{},"logoImage":{"id":"1*-v207691raOmUc6vTWHx5g@2x.png","originalWidth":280,"originalHeight":280,"alt":"Google Design"},"alignment":1,"layout":6},"type":"Collection"},"newsletterId":"","webCanonicalUrl":"https://medium.com/google-design/google-photos-45b714dfbed1","mediumUrl":"https://medium.com/google-design/google-photos-45b714dfbed1","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"isSponsored":false,"isRequestToPubDisabled":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isNsfw":false,"isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"featureLockRequestMinimumGuaranteeAmount":0,"isElevate":false,"mongerRequestType":1,"layerCake":3,"type":"Post"},"mentionedUsers":[{"userId":"86f947617ace","name":"Vincent Mo","username":"vincentmo","createdAt":1417851132159,"lastPostCreatedAt":0,"imageId":"0*ITOqqW8pXOBoEjvI.jpg","backgroundImageId":"","bio":"","twitterScreenName":"","facebookAccountId":"7949736","allowNotes":1,"mediumMemberAt":0,"isPartnerProgramEnrolled":false,"type":"User"},{"userId":"6ee65fb2910f","name":"Jeremy Selier","username":"jerem","createdAt":1353548885037,"lastPostCreatedAt":1389798003116,"imageId":"0*QFM-MGOemzhttlH6.png","backgroundImageId":"1*OkrDmsivyNrsdDea5nS1rw.jpeg","bio":"Software Engineer at Google Photos - Making http://photos.google.com fast and beautiful","twitterScreenName":"jerem","facebookAccountId":"","allowNotes":1,"mediumMemberAt":0,"isPartnerProgramEnrolled":false,"type":"User"}],"collaborators":[{"user":{"userId":"81b9cb203f66","name":"Laura Granka","username":"laura.granka","createdAt":1500299658414,"lastPostCreatedAt":0,"imageId":"0*tFAeIZC5RHRCoIJj.","backgroundImageId":"","bio":"","twitterScreenName":"","facebookAccountId":"","allowNotes":1,"mediumMemberAt":0,"isPartnerProgramEnrolled":false,"type":"User"},"state":"visible"},{"user":{"userId":"275f3d34954","name":"Teon Harasymiv","username":"teonwastaken","createdAt":1454536343884,"lastPostCreatedAt":1471840538451,"imageId":"0*g-MebaGmw1YQtaeG.jpg","backgroundImageId":"","bio":"","twitterScreenName":"","facebookAccountId":"","allowNotes":1,"mediumMemberAt":0,"isPartnerProgramEnrolled":false,"type":"User"},"state":"visible"},{"user":{"userId":"6ee65fb2910f","name":"Jeremy Selier","username":"jerem","createdAt":1353548885037,"lastPostCreatedAt":1389798003116,"imageId":"0*QFM-MGOemzhttlH6.png","backgroundImageId":"1*OkrDmsivyNrsdDea5nS1rw.jpeg","bio":"Software Engineer at Google Photos - Making http://photos.google.com fast and beautiful","twitterScreenName":"jerem","facebookAccountId":"","allowNotes":1,"mediumMemberAt":0,"isPartnerProgramEnrolled":false,"type":"User"},"state":"visible"},{"user":{"userId":"1daf1091b04e","name":"Barbara Eldredge","username":"barbaraeldredge","createdAt":1423184696511,"lastPostCreatedAt":1433272152141,"imageId":"1*aPgKATkr9IGxF59aOfLsJw.jpeg","backgroundImageId":"","bio":"Design writer","twitterScreenName":"barbaraeldredge","facebookAccountId":"","allowNotes":1,"mediumMemberAt":0,"isPartnerProgramEnrolled":false,"type":"User"},"state":"visible"}],"collectionUserRelations":[],"mode":null,"references":{"User":{"1f27dffb5ff4":{"userId":"1f27dffb5ff4","name":"Antin Harasymiv","username":"antin","createdAt":1345007376686,"lastPostCreatedAt":1531713843284,"imageId":"1*UqbFGaRIKG9UnJwoh1ApCw.png","backgroundImageId":"","bio":"UX Engineer @Google","twitterScreenName":"antin","socialStats":{"userId":"1f27dffb5ff4","usersFollowedCount":27,"usersFollowedByCount":594,"type":"SocialStats"},"social":{"userId":"b4fca1ba9239","targetUserId":"1f27dffb5ff4","type":"Social"},"facebookAccountId":"1940376042688552","allowNotes":1,"isNsfw":false,"isWriterProgramInvited":false,"isPartnerProgramEnrolled":false,"isWriterProgramEnrolled":false,"type":"User"}},"Collection":{"2935d33b43a8":{"id":"2935d33b43a8","name":"Google Design","slug":"google-design","tags":["GOOGLE","MATERIAL DESIGN","UX DESIGN"],"creatorId":"6edd8fab00b6","description":"Google Design is a cooperative effort led by a group of designers, writers, and developers at Google to support and further design and technology. Our Medium collection features highlights from design.google, and original content written by designers and engineers at Google.","shortDescription":"Google Design is a cooperative effort led by a group of…","image":{"imageId":"1*RGUDs-7Iegr7UOmlu4lmpg.png","filter":"","backgroundSize":"","originalWidth":60,"originalHeight":60,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":112799,"activeAt":1531241796543},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*DAhCtCQXf8jbjJEXPTsLYw.png","filter":"","backgroundSize":"","originalWidth":352,"originalHeight":73,"strategy":"resample","height":0,"width":0},"twitterUsername":"googledesign","publicEmail":"design@google.com","collectionMastheadId":"be4d1050b17a","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Google Design","description":"Supporting the future of design and technology","backgroundImage":{},"logoImage":{"id":"1*-v207691raOmUc6vTWHx5g@2x.png","originalWidth":280,"originalHeight":280,"alt":"Google Design"},"alignment":1,"layout":6}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":1,"postIds":["45b714dfbed1"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["60499be68b25","85a010840f7b","c41f4018bc5"]}},{"type":1,"postListMetadata":{"source":2,"layout":4,"number":3,"postIds":[],"sectionHeader":"Top stories by designers at Google"}},{"type":1,"postListMetadata":{"source":1,"layout":6,"number":25,"postIds":[],"sectionHeader":"Latest"}}],"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF02B875","point":0},{"color":"#FF00AB6B","point":0.1},{"color":"#FF1C9963","point":0.2},{"color":"#FF092E20","point":1}],"backgroundColor":"#FFFFFFFF"},"highlightSpectrum":{"colorPoints":[{"color":"#FFFFFFFF","point":0},{"color":"#FFE9FDF0","point":0.1},{"color":"#FFE2FAEE","point":0.2},{"color":"#FFADFFCF","point":0.6},{"color":"#FF7DFFB3","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":1,"title":"Google","tagSlug":"google","url":"https://medium.com/google-design/tagged/google","source":"tagSlug"},{"type":1,"title":"How-Tos","tagSlug":"how-to","url":"https://medium.com/google-design/tagged/how-to","source":"tagSlug"},{"type":1,"title":"Career Advice","tagSlug":"career-advice","url":"https://medium.com/google-design/tagged/career-advice","source":"tagSlug"},{"type":1,"title":"Material","tagSlug":"material-design","url":"https://medium.com/google-design/tagged/material-design","source":"tagSlug"},{"type":5,"title":"Archive","url":"https://medium.com/google-design/archive"},{"type":3,"title":"Sign up for our newsletter","url":"https://services.google.com/fb/forms/google-design-updates/"}],"colorBehavior":1,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Google Design","description":"Supporting the future of design and technology","backgroundImage":{},"logoImage":{"id":"1*-v207691raOmUc6vTWHx5g@2x.png","originalWidth":280,"originalHeight":280,"alt":"Google Design"},"alignment":1,"layout":6},"type":"Collection"}},"Social":{"1f27dffb5ff4":{"userId":"b4fca1ba9239","targetUserId":"1f27dffb5ff4","type":"Social"}},"SocialStats":{"1f27dffb5ff4":{"userId":"1f27dffb5ff4","usersFollowedCount":27,"usersFollowedByCount":594,"type":"SocialStats"}}}})
// ]]></script><!-- START Parse.ly Include: Standard --><div id="parsely-root" style="display: none"><span id="parsely-cfg" data-parsely-site="medium.com"></span><script id="parsely-script" async="" src="./house1_files/p.js"></script></div><script>(function(s, p, d) {var h = d.location.protocol, i = p + "-" + s, e = d.getElementById(i), r = d.getElementById(p + "-root"), u = h === "https:" ? "d1z2jf7jlzjs58.cloudfront.net" : "static." + p + ".com"; if (e) return; e = d.createElement(s); e.id = i; e.async = true; e.src = h + "//" + u + "/p.js"; r.appendChild(e);})("script", "parsely", document);</script><!-- END Parse.ly Include: Standard --><div class="surface-scrollOverlay"></div><script charset="UTF-8" src="./house1_files/main-common-async.bundle.JBH4hHANmtwNdI1d_LbO_w.js"></script><script charset="UTF-8" src="./house1_files/main-notes.bundle.V9EzOjHJ3ICCaIdpNAzmTA.js"></script><script charset="UTF-8" src="./house1_files/main-posters.bundle.ZfxiW37YEu6fNe5U2l9NxQ.js"></script><div contenteditable="true" tabindex="-1" style="position: absolute; top: 0px; left: -9999px; width: 100px; height: 100px; overflow: hidden;"></div><div contenteditable="true" tabindex="-1" style="position: absolute; top: 0px; left: -9999px; width: 100px; height: 100px; overflow: hidden;"></div><div contenteditable="true" tabindex="-1" style="position: absolute; top: 0px; left: -9999px; width: 100px; height: 100px; overflow: hidden;"></div></body></html>
